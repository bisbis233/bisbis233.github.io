<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>JavaScript学习汇总 - 一条懒狗的博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="一条懒狗的博客"><meta name="msapplication-TileImage" content="/img/avatar.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="一条懒狗的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="变量值数据类型 字符串 String​	字符串是文本的一部分。当你给一个变量赋值为字符串时，你需要用单引号或者双引号把值给包起来，否则 JavaScript 将会把这个字符串值理解成别的变量名。  数组 Number​	你可以在变量中存储数字，不论这些数字是像 30（也叫整数）这样，或者像 2.456 这样的小数（也叫做浮点数）。与其他编程语言不同，在 JavaScript 中你不需要声明一个变量"><meta property="og:type" content="blog"><meta property="og:title" content="JavaScript学习汇总"><meta property="og:url" content="https://bisbis233/github.io/2022/10/03/js%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/"><meta property="og:site_name" content="一条懒狗的博客"><meta property="og:description" content="变量值数据类型 字符串 String​	字符串是文本的一部分。当你给一个变量赋值为字符串时，你需要用单引号或者双引号把值给包起来，否则 JavaScript 将会把这个字符串值理解成别的变量名。  数组 Number​	你可以在变量中存储数字，不论这些数字是像 30（也叫整数）这样，或者像 2.456 这样的小数（也叫做浮点数）。与其他编程语言不同，在 JavaScript 中你不需要声明一个变量"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220620094419528.png"><meta property="og:image" content="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220626101150962.png"><meta property="og:image" content="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220626110208877.png"><meta property="og:image" content="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220627093318721.png"><meta property="article:published_time" content="2022-10-03T15:16:31.000Z"><meta property="article:modified_time" content="2023-02-01T08:24:04.039Z"><meta property="article:author" content="一条懒狗"><meta property="article:tag" content="JavaScript"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220620094419528.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://bisbis233/github.io/2022/10/03/js%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/"},"headline":"JavaScript学习汇总","image":["https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220620094419528.png","https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220626101150962.png","https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220626110208877.png","https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220627093318721.png"],"datePublished":"2022-10-03T15:16:31.000Z","dateModified":"2023-02-01T08:24:04.039Z","author":{"@type":"Person","name":"一条懒狗"},"publisher":{"@type":"Organization","name":"一条懒狗的博客","logo":{"@type":"ImageObject","url":"https://bisbis233/img/avatar.svg"}},"description":"变量值数据类型 字符串 String​\t字符串是文本的一部分。当你给一个变量赋值为字符串时，你需要用单引号或者双引号把值给包起来，否则 JavaScript 将会把这个字符串值理解成别的变量名。  数组 Number​\t你可以在变量中存储数字，不论这些数字是像 30（也叫整数）这样，或者像 2.456 这样的小数（也叫做浮点数）。与其他编程语言不同，在 JavaScript 中你不需要声明一个变量"}</script><link rel="canonical" href="https://bisbis233/github.io/2022/10/03/js%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/"><link rel="icon" href="/img/avatar.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/avatar.svg" alt="一条懒狗的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-10-03T15:16:31.000Z" title="2022/10/3 下午11:16:31">2022-10-03</time>发表</span><span class="level-item"><time dateTime="2023-02-01T08:24:04.039Z" title="2023/2/1 下午4:24:04">2023-02-01</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">学习汇总</a></span><span class="level-item">2 小时读完 (大约20559个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">JavaScript学习汇总</h1><div class="content"><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="值数据类型"><a href="#值数据类型" class="headerlink" title="值数据类型"></a>值数据类型</h3><ol>
<li><h4 id="字符串-String"><a href="#字符串-String" class="headerlink" title="字符串 String"></a>字符串 String</h4><p>​	字符串是文本的一部分。当你给一个变量赋值为字符串时，你需要用单引号或者双引号把值给包起来，否则 JavaScript 将会把这个字符串值理解成别的变量名。</p>
</li>
<li><h4 id="数组-Number"><a href="#数组-Number" class="headerlink" title="数组 Number"></a>数组 Number</h4><p>​	你可以在变量中存储数字，不论这些数字是像 30（也叫整数）这样，或者像 2.456 这样的小数（也叫做浮点数）。与其他编程语言不同，在 JavaScript 中你不需要声明一个变量的类型。当你给一个变量数字赋值时，不需要用引号括起来。 </p>
<blockquote>
<p>最大值为<strong>2^53</strong>，如果超出最大值，会进行取整操作</p>
</blockquote>
</li>
<li><h4 id="布尔-Boolean"><a href="#布尔-Boolean" class="headerlink" title="布尔 Boolean"></a>布尔 Boolean</h4><p>Boolean 的值有 2 种：true 或 false。它们通常被用于在适当的代码之后，测试条件是否成立。</p>
<ol>
<li>数值类型环境中会被当作 0 来对待</li>
<li>布尔类型环境中会被当作<strong>false</strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n * <span class="number">32</span>); <span class="comment">// 在控制台中会显示 0</span></span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="空值-Null"><a href="#空值-Null" class="headerlink" title="空值 Null"></a>空值 Null</h4></li>
<li><h4 id="未定义-Undefined"><a href="#未定义-Undefined" class="headerlink" title="未定义 Undefined"></a>未定义 Undefined</h4><ol>
<li><p>使用 <code>undefined</code> 来判断一个变量是否已赋值</p>
</li>
<li><p>在布尔类型环境中会被当作<strong>false</strong></p>
</li>
<li><p>数值类型环境中会被转换为NaN</p>
</li>
<li><p>变量提升</p>
<p><code>JavaScript</code> 变量感觉上是被“提升”或移到了函数或语句的最前面。但是，提升后的变量将返回 <code>undefined</code> 值。因此在使用或引用某个变量之后进行声明和初始化操作，这个被提升的变量仍将返回 <code>undefined</code> 值。</p>
<blockquote>
<p>在 ECMAScript 6 中，<code>let</code>和<code>const</code>同样<strong>会被提升</strong>变量到代码块的顶部但是不会被赋予初始值。在变量声明之前引用这个变量，将抛出引用错误（ReferenceError）。这个变量将从代码块一开始的时候就处在一个“暂时性死区”，直到这个变量被声明为止。</p>
</blockquote>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x === <span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">a + <span class="number">2</span>;    <span class="comment">// 计算为 NaN</span></span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h4></li>
</ol>
<h3 id="引用数据类型"><a href="#引用数据类型" class="headerlink" title="引用数据类型"></a>引用数据类型</h3><ol>
<li><h4 id="对象-Object"><a href="#对象-Object" class="headerlink" title="对象 Object"></a>对象 Object</h4><p>​	在编程中，对象是现实生活中的模型的一种代码结构。您可以有一个简单的对象，代表一个停车场，并包含有关其宽度和长度的信息，或者您可以有一个代表一个人的对象，并包含有关他们的名字，身高，体重，他们说什么语言，如何说 你好，他们，等等。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dog = &#123; name : <span class="string">&#x27;Spot&#x27;</span>, breed : <span class="string">&#x27;Dalmatian&#x27;</span> &#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="数组-Array"><a href="#数组-Array" class="headerlink" title="数组 Array"></a>数组 Array</h4><p>数组是一个单个对象，其中包含很多值，方括号括起来，并用逗号分隔</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myNameArray = [<span class="string">&#x27;Chris&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Jim&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> myNumberArray = [<span class="number">10</span>,<span class="number">15</span>,<span class="number">40</span>];</span><br></pre></td></tr></table></figure>

<h5 id="常见方法"><a href="#常见方法" class="headerlink" title="常见方法"></a>常见方法</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sherly_chen/article/details/120712440">(75条消息) 详解split()使用方法_陈小谷谷的博客-CSDN博客_split</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myData = <span class="string">&#x27;Manchester,London,Liverpool,Birmingham,Leeds,Carlisle&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> myArray = myData.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);<span class="comment">//根据每个逗号分隔</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><h4 id="函数-Function"><a href="#函数-Function" class="headerlink" title="函数 Function"></a>函数 Function</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">functionname</span>(<span class="params">var1,var2</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 执行代码</span></span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="var与let的区别"><a href="#var与let的区别" class="headerlink" title="var与let的区别"></a><code>var</code>与<code>let</code>的区别</h3><p>var可以多次声明相同名称的变量</p>
<p>使用 <code>var</code> 关键字声明变量时，它是全局声明的，如果在函数内部声明则是局部声明的。</p>
<p><code>let</code> 关键字的行为类似，但有一些额外的功能。 在代码块、语句或表达式中使用 <code>let</code> 关键字声明变量时，其作用域仅限于该代码块、语句或表达式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numArray = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  numArray.<span class="title function_">push</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numArray);<span class="comment">//[0, 1, 2]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);<span class="comment">//3</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  numArray.<span class="title function_">push</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numArray);<span class="comment">//[0, 1, 2]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">lg</span>(i);<span class="comment">//未被定义</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myName = <span class="string">&#x27;Chris&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> myName = <span class="string">&#x27;Bob&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>let不能多次声明相同名称的变量</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myName = <span class="string">&#x27;Chris&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> myName = <span class="string">&#x27;Bob&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220620094419528.png" alt="image-20220620094419528"></p>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><p>默认情况下，一些开发人员更喜欢使用 <code>const</code> 分配所有变量，除非他们知道需要重新分配值。 只有在这种情况下，他们才使用 <code>let</code>。</p>
<p>但是，重要的是要了解使用 <code>const</code> 分配给变量的对象（包括数组和函数）仍然是可变的。 使用 <code>const</code> 声明只能防止变量标识符的重新分配。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line">s = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];<span class="comment">//s = [1, 2, 3] 将导致错误。</span></span><br><span class="line">s[<span class="number">2</span>] = <span class="number">45</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s);<span class="comment">//console.log 将显示值 [5, 6, 45]。</span></span><br></pre></td></tr></table></figure>

<p><code>const</code> 声明并不会真的保护数据不被改变。 为了确保数据不被改变，JavaScript 提供了一个函数 <code>Object.freeze</code>。</p>
<p>任何更改对象的尝试都将被拒绝，如果脚本在严格模式下运行，将抛出错误。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&quot;FreeCodeCamp&quot;</span>,</span><br><span class="line">  <span class="attr">review</span>:<span class="string">&quot;Awesome&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(obj);</span><br><span class="line">obj.<span class="property">review</span> = <span class="string">&quot;bad&quot;</span>;<span class="comment">//错误</span></span><br><span class="line">obj.<span class="property">newProp</span> = <span class="string">&quot;Test&quot;</span>;<span class="comment">//错误</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj); </span><br></pre></td></tr></table></figure>

<h3 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h3><ul>
<li>你不应当使用规则之外的其他字符，因为它们可能引发错误，或对国际用户来说难以理解。</li>
<li>变量名不要以下划线开头—— 以下划线开头的被某些 JavaScript 设计为特殊的含义，因此可能让人迷惑。</li>
<li>变量名不要以数字开头。这种行为是不被允许的，并且将引发一个错误。</li>
<li>一个可靠的命名约定叫做 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/CamelCase#Variations_and_synonyms">“小写驼峰命名法”</a>，用来将多个单词组在一起，小写整个命名的第一个字母然后大写剩下单词的首字符。我们已经在文章中使用了这种命名方法。（my<code>N</code>ame）</li>
<li>让变量名直观，它们描述了所包含的数据。不要只使用单一的字母&#x2F;数字，或者长句。</li>
<li>变量名大小写敏感——因此<code>myage</code>与<code>myAge</code>是 2 个不同的变量。</li>
<li>最后也是最重要的一点—— 你应当避免使用 JavaScript 的保留字给变量命名。保留字，即是组成 JavaScript 的实际语法的单词！因此诸如 <code>var</code>, <code>function</code>, <code>let和</code> <code>for</code>等，都不能被作为变量名使用。浏览器将把它们识别为不同的代码项，因此你将得到错误。</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a><code>apply</code></h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lixiaotao_1/article/details/85050945">(90条消息) Js apply方法详解,及其apply()方法的妙用_lixiaotao_1的博客-CSDN博客_apply的参数</a></p>
<p>劫持另外一个对象的方法，继承另外一个对象的属性</p>
<p>如果 <code>apply()</code> 方法的第一个参数不是对象，则它将成为被调用函数的所有者（对象）。在“非严格”模式下，它成为全局对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Function.apply(obj,args)</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">fullName</span>: <span class="keyword">function</span>(<span class="params">city, country</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span> + <span class="string">&quot;,&quot;</span> + city + <span class="string">&quot;,&quot;</span> + country;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">  <span class="attr">firstName</span>:<span class="string">&quot;Bill&quot;</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">&quot;Gates&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//person使用apply劫持了person1的属性，替代了person中this对象</span></span><br><span class="line">person.<span class="property">fullName</span>.<span class="title function_">call</span>(person1, [<span class="string">&quot;Oslo&quot;</span>, <span class="string">&quot;Norway&quot;</span>]); <span class="comment">// 将返回 &quot;Bill Gates,Seatle,USA&quot;</span></span><br><span class="line">person.<span class="property">fullName</span>.<span class="title function_">call</span>(person1, <span class="string">&quot;Oslo&quot;</span>, <span class="string">&quot;Norway&quot;</span>);  <span class="comment">// 将返回 &quot;Bill Gates,Seatle,USA&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//求数组最大值</span></span><br><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> max = <span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, array);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max);<span class="comment">//3</span></span><br></pre></td></tr></table></figure>

<h3 id="call"><a href="#call" class="headerlink" title="call"></a><code>call</code></h3><p>call 方法的语法和作用与 apply() 方法类似，只有一个区别，就是 call() 方法接受的是一个参数列表，而 apply() 方法接受的是一个包含多个参数的 **<a target="_blank" rel="noopener" href="https://haicoder.net/javascript/javascript-array.html">数组</a>**。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//function.call(thisArg, arg1, arg2, ...);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">fullName</span>: <span class="keyword">function</span>(<span class="params">city, country</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + <span class="variable language_">this</span>.<span class="property">lastName</span> + <span class="string">&quot;,&quot;</span> + city + <span class="string">&quot;,&quot;</span> + country;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">  <span class="attr">firstName</span>:<span class="string">&quot;Bill&quot;</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="string">&quot;Gates&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">person.<span class="property">fullName</span>.<span class="title function_">call</span>(person1, <span class="string">&quot;Seattle&quot;</span>, <span class="string">&quot;USA&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/250432609">彻底理解js闭包 - 知乎 (zhihu.com)</a>（有一道面试题）</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures">闭包 - JavaScript | MDN (mozilla.org)</a></p>
<p>有权访问另一个函数作用域中的变量的函数；一般情况就是在一个函数中包含另一个函数。</p>
<p>闭包的实现原理，其实是利用了作用域链的特性，我们都知道作用域链就是在当前执行环境下访问某个变量时，如果不存在就一直向外层寻找，最终寻找到最外层也就是全局作用域，这样就形成了一个链条。</p>
<p><strong>作用1：</strong>隐藏变量，避免全局污染</p>
<p><strong>作用2：</strong>可以读取函数内部的变量</p>
<blockquote>
<p>函数创建和函数执行不在同一个作用域下就会形成闭包。</p>
<p>闭包是指那些能够访问自由变量的函数（自由变量：是指在函数中使用的变量即不是函数参数<code>arguments</code>也不是函数内部声明的变量，那这个变量就是<strong>自由变量</strong>。）</p>
<p>闭包是指有权访问另外一个函数作用域中的变量的函</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、通过全局变量，可以实现，但会污染其他程序</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Add</span>(<span class="params"></span>)&#123;</span><br><span class="line">    a++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Add</span>();</span><br><span class="line"><span class="title class_">Add</span>();</span><br><span class="line"><span class="title class_">Add</span>();</span><br><span class="line"><span class="comment">//2、定义一个局部变量，不污染全局，但是实现不了递增</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Add2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">    a++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Add2</span>();</span><br><span class="line"><span class="title class_">Add2</span>();</span><br><span class="line"><span class="title class_">Add2</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="comment">//3、通过闭包，可以是函数内部局部变量递增，不会影响全部变量</span></span><br><span class="line"><span class="keyword">var</span> a  = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Add3</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> cc =  <span class="title class_">Add3</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">cc</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">cc</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">cc</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>

<h3 id="callback回调函数"><a href="#callback回调函数" class="headerlink" title="callback回调函数"></a><code>callback</code>回调函数</h3><p>可以将一个<strong>函数</strong>当作另一个函数的形参来传递。格式如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span> (形参<span class="number">1</span>, 形参<span class="number">2</span>, 函数B) &#123;</span><br><span class="line">    <span class="keyword">do</span> something;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实你可以先声明一个function 函数B ()这样子的，又可以在调用的时候才去实现这个方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span> (形参<span class="number">1</span>, 形参<span class="number">2</span>, 函数B) &#123;    <span class="keyword">do</span> something;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">A</span>(传入形参<span class="number">1</span>, 传入形参<span class="number">2</span>, 函数<span class="title function_">B</span>(<span class="params"></span>) &#123;</span><br><span class="line">  这里是函数B的实现方法体</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局变量</span></span><br><span class="line"><span class="keyword">const</span> s = [<span class="number">23</span>, <span class="number">65</span>, <span class="number">98</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myMap</span> = <span class="keyword">function</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> newArray = [];</span><br><span class="line">  <span class="comment">// 只修改这一行下面的代码</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">a</span> =&gt;</span> newArray.<span class="title function_">push</span>(<span class="title function_">callback</span>(a)));</span><br><span class="line">  <span class="comment">// 只修改这一行上面的代码</span></span><br><span class="line">  <span class="keyword">return</span> newArray;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> new_s = s.<span class="title function_">myMap</span>(<span class="keyword">function</span>(<span class="params">item</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> item * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>回调函数是NodeJs中<strong>异步编程</strong>很重要的一个知识。例如，我们可以一边读取文件，一边执行其他命令，在文件读取完成后，我们将文件内容作为回调函数的参数返回。这样在执行代码时就没有阻塞或等待文件 I&#x2F;O 操作。这就大大提高了 Node.js 的性能，可以处理大量的并发请求。</p>
<h4 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span> (x, y) &#123;</span><br><span class="line">    <span class="comment">// 设置1秒后出计算结果</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始运算&#x27;</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 保存计算结果</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;保存计算结果&#x27;</span>)</span><br><span class="line">        <span class="keyword">var</span> result = x + y</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;结束运算&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印返回值结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;计算结果为：&#x27;</span>+<span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment">//运行结果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">开始运算</span></span><br><span class="line"><span class="comment">结束运算</span></span><br><span class="line"><span class="comment">计算结果为undefined</span></span><br><span class="line"><span class="comment">保存计算结果</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>undefined ？为什么会是这个结果？</p>
<p>从执行顺序上来看我们就可以得出结论，</p>
<p>打印返回值结果 这一步并没有等待到 setTimeout 里面相加这步运行结束就已经打印结果了 ，所以返回结果为undefined。</p>
<p>我们要做的就是得到setTimeout里面的返回值。</p>
<p>我们来用callback函数改写一下上面的案例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span> (x, y, callback) &#123;</span><br><span class="line">    <span class="comment">// 设置1秒后出计算结果</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始运算&#x27;</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 保存计算结果</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;保存计算结果&#x27;</span>)</span><br><span class="line">        <span class="keyword">var</span> result = x + y</span><br><span class="line">        <span class="title function_">callback</span>(result)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;结束运算&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line">    <span class="comment">// 这是callback函数实现体</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;计算结果为：&#x27;</span>+result)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//运算结果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">开始运算</span></span><br><span class="line"><span class="comment">结束运算</span></span><br><span class="line"><span class="comment">保存计算结果</span></span><br><span class="line"><span class="comment">计算结果为：3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>这个函数的执行流程就是：传入x, y -&gt; add跳过等待 -&gt; add执行结束 -&gt;setTimeout开始计算结果 -&gt; 将计算结果当作callback函数的参数 -&gt; callback函数实现体。</p>
<p>作用就是将异步的计算结果当作另一个函数的形参转发出去了。相当于你写多一个方法来保存这个计算结果。</p>
<h3 id="创建新对象"><a href="#创建新对象" class="headerlink" title="创建新对象"></a>创建新对象</h3><h4 id="使用对象初始化器"><a href="#使用对象初始化器" class="headerlink" title="使用对象初始化器"></a>使用对象初始化器</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">property_1</span>:   value_1,   <span class="comment">// property_# 可以是一个标识符...</span></span><br><span class="line">            <span class="number">2</span>:            value_2,   <span class="comment">// 或一个数字...</span></span><br><span class="line">           [<span class="string">&quot;property&quot;</span> +<span class="number">3</span>]: value_3,  <span class="comment">//  或一个可计算的 key 名...</span></span><br><span class="line">            <span class="comment">// ...,</span></span><br><span class="line">            <span class="string">&quot;property n&quot;</span>: value_n &#125;; <span class="comment">// 或一个字符串</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下面的语句只有当 <code>cond</code> 表达式的值为 <code>true</code> 时创建对象并将其赋给变量 <code>x</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (cond) <span class="keyword">var</span> x = &#123;<span class="attr">hi</span>: <span class="string">&quot;there&quot;</span>&#125;;</span><br></pre></td></tr></table></figure>

<p>下例创建了有三个属性的 <code>myHonda</code> 对象。注意它的 <code>engine</code> 属性也是一个拥有自己属性的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myHonda = &#123;<span class="attr">color</span>: <span class="string">&quot;red&quot;</span>, <span class="attr">wheels</span>: <span class="number">4</span>, <span class="attr">engine</span>: &#123;<span class="attr">cylinders</span>: <span class="number">4</span>, <span class="attr">size</span>: <span class="number">2.2</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="使用构造函数new"><a href="#使用构造函数new" class="headerlink" title="使用构造函数new"></a>使用构造函数<code>new</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Car</span>(<span class="params">make, model, year</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">make</span> = make;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">model</span> = model;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">year</span> = year;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> mycar = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;Eagle&quot;</span>, <span class="string">&quot;Talon TSi&quot;</span>, <span class="number">1993</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>首先创建一个空对象</li>
<li>设置原型，将对象的_proto_纸箱构造函数的protype对象</li>
<li>让函数的this指向这个对象，执行构造函数的代码（为这个新对象添加属性）</li>
<li>判断函数的返回类型，如果是值类型，返回创建的对象。如果是引用型对象，则返回这个引用类型的对象</li>
</ol>
<h4 id="使用Object-create方法"><a href="#使用Object-create方法" class="headerlink" title="使用Object.create方法"></a>使用Object.create方法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Animal properties and method encapsulation</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Animal</span> = &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;Invertebrates&quot;</span>, <span class="comment">// 属性默认值</span></span><br><span class="line">  displayType : <span class="keyword">function</span>(<span class="params"></span>) &#123;  <span class="comment">// 用于显示 type 属性的方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">type</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一种新的动物——animal1</span></span><br><span class="line"><span class="keyword">var</span> animal1 = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Animal</span>);</span><br><span class="line">animal1.<span class="title function_">displayType</span>(); <span class="comment">// Output:Invertebrates</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一种新的动物——Fishes</span></span><br><span class="line"><span class="keyword">var</span> fish = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Animal</span>);</span><br><span class="line">fish.<span class="property">type</span> = <span class="string">&quot;Fishes&quot;</span>;</span><br><span class="line">fish.<span class="title function_">displayType</span>(); <span class="comment">// Output:Fishes</span></span><br></pre></td></tr></table></figure>

<p>Object.create(Obj)的内部，并没有去调用Obj<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0&spm=1001.2101.3001.7020">构造函数</a>，而是调用了创建新对象的构造函数，因此Obj上的属性不会继承到Object.create创建的实例中</p>
<ol>
<li>Object.create(Obj)会凭空创建一个“新”对象并把新对象内部的[[Prototype]]关联到你指定的对象</li>
</ol>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>所有的 JavaScript 对象至少继承于一个对象。被继承的对象被称作原型，并且继承的属性可通过构造函数的 <code>prototype</code> 对象找到。</p>
<p>在 JavaScript 1.0 中，你可以通过名称或序号访问一个属性。但是在 JavaScript 1.1 及之后版本中，如果你最初使用名称定义了一个属性，则你<strong>必须通过名称来访问</strong>它；而如果你最初使用序号来定义一个属性，则你<strong>必须通过索引来访问</strong>它。</p>
<p>这个限制发生在你通过构造函数创建一个对象和它的属性（就象我们之前通过 <code>Car</code> 对象类型所做的那样）并且显式地定义了单独的属性（如 <code>m</code>yCar.color &#x3D; “red”）之时。如果你最初使用索引定义了一个对象属性，例如 <code>myCar[5] = &quot;25&quot;</code>，则你只可能通过 <code>myCar[5]</code> 引用它。</p>
<p>你可以通过 <code>prototype </code>属性为之前定义的对象类型增加属性。这为该类型的所有对象，而不是仅仅一个对象增加了一个属性。下面的代码为所有类型为 <code>car </code>的对象增加了 <code>color</code> 属性，然后为对象 <code>car1</code> 的 <code>color</code> 属性赋值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Car</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">color</span> = <span class="literal">null</span>;</span><br><span class="line">car1.<span class="property">color</span> = <span class="string">&quot;black&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="通过this引用对象"><a href="#通过this引用对象" class="headerlink" title="通过this引用对象"></a>通过this引用对象</h3><p>JavaScript 有一个特殊的关键字 <code>this</code>，它可以在方法中使用以指代当前对象。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">onChange</span>=<span class="string">&quot;validate(this, 18, 99)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当与 <code>form</code> 属性一起使用时，<code>this </code>可以指代当前对象的父窗体。在下面的例子中，窗体 <code>myForm</code> 包含一个 <code>Text </code>对象和一个按钮，当用户点击按键，<code>Text</code> 对象的值被设为窗体的名称。按钮的 <code>onclick</code> 事件处理器使用 <code>this.form</code> 以指代其父窗体，即 <code>myForm</code>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">&quot;myForm&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>Form name:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;text1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Beluga&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;button1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Show Form Name&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">onclick</span>=<span class="string">&quot;this.form.text1.value = this.form.name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="定义getters与setters"><a href="#定义getters与setters" class="headerlink" title="定义getters与setters"></a>定义getters与setters</h3><p>一个 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/get">getter</a> 是一个获取某个特定属性的值的方法。一个 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/set">setter</a> 是一个设定某个属性的值的方法。你可以为预定义的或用户定义的对象定义 getter 和 setter 以支持新增的属性。定义 getter 和 setter 的语法采用对象字面量语法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用使用 使用对象初始化器 定义</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">7</span>,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">b</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">a</span> + <span class="number">1</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">c</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = x / <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//使用 getter 和 setter 添加方法添加到任何对象</span></span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">a</span>:<span class="number">0</span> &#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperties</span>(o, &#123;</span><br><span class="line">    <span class="string">&quot;b&quot;</span>: &#123; <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">a</span> + <span class="number">1</span>; &#125; &#125;,</span><br><span class="line">    <span class="string">&quot;c&quot;</span>: &#123; <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">x</span>) &#123; <span class="variable language_">this</span>.<span class="property">a</span> = x / <span class="number">2</span>; &#125; &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o.<span class="property">a</span>); <span class="comment">// 7</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o.<span class="property">b</span>); <span class="comment">// 8</span></span><br><span class="line">o.<span class="property">c</span> = <span class="number">50</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o.<span class="property">a</span>); <span class="comment">// 25</span></span><br></pre></td></tr></table></figure>

<p>下面这个例子展示使用 getter 和 setter 方法扩展 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date"><code>Date</code></a>原型，为预定义好的 Date 类添加一个 year 的属性。定义属性 year 的 getter 和 setter 方法用到了 Date 类中已存在的 getFullYear 和 setFullYear 方法。</p>
<p>定义属性 year 的 getter 和 setter：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="title class_">Date</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(d, <span class="string">&quot;year&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">getFullYear</span>() &#125;,</span><br><span class="line">  <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">y</span>) &#123; <span class="variable language_">this</span>.<span class="title function_">setFullYear</span>(y) &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="删除属性"><a href="#删除属性" class="headerlink" title="删除属性"></a>删除属性</h3><p>你可以用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete"><code>delete</code></a> 操作符删除一个<strong>不是继承而来</strong>的属性。下面的例子说明如何删除一个属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Creates a new object, myobj, with two properties, a and b.</span></span><br><span class="line"><span class="keyword">var</span> myobj = <span class="keyword">new</span> <span class="title class_">Object</span>;</span><br><span class="line">myobj.<span class="property">a</span> = <span class="number">5</span>;</span><br><span class="line">myobj.<span class="property">b</span> = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Removes the a property, leaving myobj with only the b property.</span></span><br><span class="line"><span class="keyword">delete</span> myobj.<span class="property">a</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果一个全局变量不是用 <code>var</code> 关键字声明的话，你也可以用 <code>delete</code> 删除它：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">delete</span> g;</span><br></pre></td></tr></table></figure>

<h3 id="比较对象"><a href="#比较对象" class="headerlink" title="比较对象"></a>比较对象</h3><p>在 JavaScript 中 objects 是一种引用类型。<strong>两个独立声明的对象永远也不会相等</strong>，即使他们有相同的属性，只有在比较一个对象和这个对象的引用时，才会返回 true.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 两个变量，两个具有同样的属性、但不相同的对象</span></span><br><span class="line"><span class="keyword">var</span> fruit = &#123;<span class="attr">name</span>: <span class="string">&quot;apple&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> fruitbear = &#123;<span class="attr">name</span>: <span class="string">&quot;apple&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">fruit == fruitbear <span class="comment">// return false</span></span><br><span class="line">fruit === fruitbear <span class="comment">// return false</span></span><br></pre></td></tr></table></figure>

<h3 id="验证对象的构造函数"><a href="#验证对象的构造函数" class="headerlink" title="验证对象的构造函数"></a>验证对象的构造函数</h3><p>凡是通过构造函数创建出的新对象，这个对象都叫做这个构造函数的 实例。 JavaScript 提供了一种很简便的方法来验证这个事实，那就是通过 <code>instanceof</code> 操作符。 <code>instanceof</code> 允许你将对象与构造函数之间进行比较，根据对象是否由这个构造函数创建的返回 <code>true</code> 或者 <code>false</code>。 以下是一个示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Bird</span> = <span class="keyword">function</span>(<span class="params">name, color</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">color</span> = color;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">numLegs</span> = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> crow = <span class="keyword">new</span> <span class="title class_">Bird</span>(<span class="string">&quot;Alexis&quot;</span>, <span class="string">&quot;black&quot;</span>);</span><br><span class="line"><span class="comment">//instanceof 方法会返回 true.</span></span><br><span class="line">crow <span class="keyword">instanceof</span> <span class="title class_">Bird</span>;</span><br></pre></td></tr></table></figure>

<h3 id="自身属性与prototype"><a href="#自身属性与prototype" class="headerlink" title="自身属性与prototype"></a>自身属性与prototype</h3><p>自身属性和 <code>prototype</code> 属性。 自身属性是直接在对象上定义的。 而原型属性在 <code>prototype</code> 上定义。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Bird</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;  <span class="comment">//own property</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Bird</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">numLegs</span> = <span class="number">2</span>; <span class="comment">// prototype property</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> duck = <span class="keyword">new</span> <span class="title class_">Bird</span>(<span class="string">&quot;Donald&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="立即调用函数表达IIFE"><a href="#立即调用函数表达IIFE" class="headerlink" title="立即调用函数表达IIFE"></a>立即调用函数表达<code>IIFE</code></h3><p>JavaScript 中的一个常见模式就是，函数在声明后立刻执行：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Chirp, chirp!&quot;</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>这是一个匿名函数表达式，立即执行并输出 <code>Chirp, chirp!</code>。</p>
<p>请注意，函数没有名称，也不存储在变量中。 函数表达式末尾的两个括号（）会让它被立即执行或调用。 这种模式被叫做立即调用函数表达式（immediately invoked function expression) 或者IIFE。</p>
<h4 id="使用-IIFE-创建一个模块"><a href="#使用-IIFE-创建一个模块" class="headerlink" title="使用 IIFE 创建一个模块"></a>使用 IIFE 创建一个模块</h4><p>一个立即调用函数表达式（IIFE）通常用于将相关功能分组到单个对象或者是 module 中。 例如，先前的挑战中定义了两个 mixins：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">glideMixin</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  obj.<span class="property">glide</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Gliding on the water&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">flyMixin</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  obj.<span class="property">fly</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Flying, wooosh!&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以将这些 mixins 分成以下模块：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> motionModule = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">glideMixin</span>: <span class="keyword">function</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">      obj.<span class="property">glide</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Gliding on the water&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">flyMixin</span>: <span class="keyword">function</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">      obj.<span class="property">fly</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Flying, wooosh!&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>注意：一个立即调用函数表达式（IIFE）返回了一个 <code>motionModule</code> 对象。 返回的这个对象包含了作为对象属性的所有 mixin 行为。 module 模式的优点是，所有的运动相关的行为都可以打包成一个对象，然后由代码的其他部分使用。 下面是一个使用它的例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">motionModule.<span class="title function_">glideMixin</span>(duck);</span><br><span class="line">duck.<span class="title function_">glide</span>();</span><br></pre></td></tr></table></figure>

<h2 id="对象模型的细节"><a href="#对象模型的细节" class="headerlink" title="对象模型的细节"></a>对象模型的细节</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Details_of_the_Object_Model">对象模型的细节 - JavaScript | MDN (mozilla.org)</a></p>
<table>
<thead>
<tr>
<th align="left">基于类的（Java）</th>
<th align="left">基于原型的（JavaScript）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">类和实例是不同的事物。</td>
<td align="left">所有对象均为实例。</td>
</tr>
<tr>
<td align="left">通过类定义来定义类；通过构造器方法来实例化类。</td>
<td align="left">通过构造器函数来定义和创建一组对象。</td>
</tr>
<tr>
<td align="left">通过 <code>new</code> 操作符创建单个对象。</td>
<td align="left">相同。</td>
</tr>
<tr>
<td align="left">通过类定义来定义现存类的子类，从而构建对象的层级结构。</td>
<td align="left">指定一个对象作为原型并且与构造函数一起构建对象的层级结构</td>
</tr>
<tr>
<td align="left">遵循类链继承属性。</td>
<td align="left">遵循原型链继承属性。</td>
</tr>
<tr>
<td align="left">类定义指定类的所有实例的<strong>所有</strong>属性。无法在运行时动态添加属性。</td>
<td align="left">构造器函数或原型指定实例的<strong>初始</strong>属性集。允许动态地向单个的对象或者整个对象集中添加或移除属性。</td>
</tr>
</tbody></table>
<h3 id="创建层级结构"><a href="#创建层级结构" class="headerlink" title="创建层级结构"></a>创建层级结构</h3><p><img src="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220626101150962.png" alt="image-20220626101150962"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Employee</span> () &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">dept</span> = <span class="string">&quot;general&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Manager</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Employee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);<span class="comment">//继承Employee</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">reports</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Manager</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WorkerBee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Employee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);<span class="comment">//继承Employee</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">projects</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SalesPerson</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="title class_">WorkerBee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);<span class="comment">//继承WorkerBee</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">dept</span> = <span class="string">&#x27;sales&#x27;</span>;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">quota</span> = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SalesPerson</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Engineer</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="title class_">WorkerBee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);<span class="comment">//继承WorkerBee</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">dept</span> = <span class="string">&#x27;engineering&#x27;</span>;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">machine</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Engineer</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br></pre></td></tr></table></figure>

<h3 id="继承属性"><a href="#继承属性" class="headerlink" title="继承属性"></a>继承属性</h3><p>假设您通过如下语句创建一个<code>mark</code>对象作为 <code>WorkerBee</code>的实例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mark = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>;</span><br></pre></td></tr></table></figure>

<p>当 JavaScript 执行 <code>new</code> 操作符时，它会先创建一个普通对象，并将这个普通对象中的 [[prototype]] 指向 <code>WorkerBee.prototype</code> ，然后再把这个普通对象设置为执行 <code>WorkerBee</code> 构造函数时 <code>this</code> 的值。该普通对象的 [[Prototype]] 决定其用于检索属性的原型链。当构造函数执行完成后，所有的属性都被设置完毕，JavaScript 返回之前创建的对象，通过赋值语句将它的引用赋值给变量 <code>mark</code>。</p>
<p>这个过程不会显式的将 <code>mark</code>所继承的原型链中的属性作为本地属性存放在 <code>mark</code> 对象中。当访问属性时，JavaScript 将首先检查对象自身中是否存在该属性，如果有，则返回该属性的值。如果不存在，JavaScript 会检查原型链（使用内置的 [[Prototype]] ）。如果原型链中的某个对象包含该属性，则返回这个属性的值。如果遍历整条原型链都没有找到该属性，JavaScript 则认为对象中不存在该属性，返回一个 <code>undefined</code>。这样，<code>mark</code> 对象中将具有如下的属性和对应的值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mark.<span class="property">name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">mark.<span class="property">dept</span> = <span class="string">&quot;general&quot;</span>;</span><br><span class="line">mark.<span class="property">projects</span> = [];</span><br></pre></td></tr></table></figure>

<p><code>mark</code> 对象从 <code>mark.__proto__</code> 中保存的原型对象里继承了 <code>name</code> 和 <code>dept</code> 属性。并由 <code>WorkerBee</code> 构造函数为 <code>projects</code> 属性设置了本地值。</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name || <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>JavaScript 的逻辑或操作符（<code>||</code>）会对第一个参数进行判断。如果该参数值运算后结果为真，则操作符返回该值。否则，操作符返回第二个参数的值。因此，这行代码首先检查 <code>name</code> 是否是对<code>name</code> 属性有效的值。如果是，则设置其为 <code>this.name</code> 的值。否则，设置 <code>this.name</code> 的值为空的字符串。</p>
</blockquote>
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/23090041">「每日一题」什么是 JS 原型链？ - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_46281615/article/details/121145865">(77条消息) JS原型对象和对象原型的区别_Hevttc_Cao的博客-CSDN博客_原型对象和对象原型的区别</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_49900295/article/details/123953725">(77条消息) 详解JS原型与原型链_小杰学前端的博客-CSDN博客_js原型和原型链</a></p>
<p>每个对象都可以有一个原型_proto_，这个原型还可以有它自己的原型，以此类推，形成一个原型链。查找特定属性的时候，我们先去这个对象里去找，如果没有的话就去它的原型对象里面去，如果还是没有的话再去向原型对象的原型对象里去寻找…… 这个操作被委托在整个原型链上，这个就是我们说的原型链了。</p>
<img src="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220626110208877.png" alt="image-20220626110208877" style="zoom:50%;" />

<p>​	</p>
<h4 id="原型指针"><a href="#原型指针" class="headerlink" title="原型指针"></a>原型指针</h4><h5 id="prototype"><a href="#prototype" class="headerlink" title="prototype:"></a>prototype:</h5><p>  prototype属性，它是<strong>函数所独有的</strong>，它是从<strong>一个函数指向一个对象</strong>。它的含义是<strong>函数的原型对象</strong>，也就是这个函数（其实所有函数都可以作为构造函数）所创建的实例的原型对象; 这个属性是一个指针，指向一个对象，这个对象的用途就是包含所有实例共享的属性和方法（我们把这个对象叫做原型对象）;</p>
<p>JavaScript规定,每一个构造函数都有一个prototype属性, 指向另一个对象。注意这个prototype就是一个对象,这个对象的所有属性和方法,都会被构造函数所拥有。<br>        我们可以把那些不变的方法,直接定义在prototype对象上,这样所有对象的实例就可以共享这些方法。</p>
<h5 id="proto"><a href="#proto" class="headerlink" title="_proto_:"></a>_proto_:</h5><p>  <strong>proto</strong> 是原型链查询中实际用到的，它总是指向 prototype，换句话说就是指向构造函数的原型对象，它是<strong>对象独有的。</strong>注意，为什么Foo构造也有这个属性呢，因为再js的宇宙里万物皆对象，包括函数；</p>
<p>对象都会有一个属性_ proto_指向构造函数的 prototype原型对象,之所以我们对象可以使用构造函数prototype原型对象的属性和方法,就是因为对象有_proto_ 原型的存在。</p>
<img src="https://imagebed233.oss-cn-guangzhou.aliyuncs.com/img/image-20220627093318721.png" alt="image-20220627093318721" style="zoom:50%;" />



<h2 id="带键的集合"><a href="#带键的集合" class="headerlink" title="带键的集合"></a>带键的集合</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sayings = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">sayings.<span class="title function_">set</span>(<span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;woof&#x27;</span>);</span><br><span class="line">sayings.<span class="title function_">set</span>(<span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;meow&#x27;</span>);</span><br><span class="line">sayings.<span class="title function_">set</span>(<span class="string">&#x27;elephant&#x27;</span>, <span class="string">&#x27;toot&#x27;</span>);</span><br><span class="line">sayings.<span class="property">size</span>; <span class="comment">// 3</span></span><br><span class="line">sayings.<span class="title function_">get</span>(<span class="string">&#x27;fox&#x27;</span>); <span class="comment">// undefined</span></span><br><span class="line">sayings.<span class="title function_">has</span>(<span class="string">&#x27;bird&#x27;</span>); <span class="comment">// false</span></span><br><span class="line">sayings.<span class="title function_">delete</span>(<span class="string">&#x27;dog&#x27;</span>);</span><br><span class="line">sayings.<span class="title function_">has</span>(<span class="string">&#x27;dog&#x27;</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> [key, value] <span class="keyword">of</span> sayings) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&#x27; goes &#x27;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &quot;cat goes meow&quot;</span></span><br><span class="line"><span class="comment">// &quot;elephant goes toot&quot;</span></span><br><span class="line"></span><br><span class="line">sayings.<span class="title function_">clear</span>();</span><br><span class="line">sayings.<span class="property">size</span>; <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<h3 id="Map函数"><a href="#Map函数" class="headerlink" title="Map函数"></a>Map函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">age</span>: <span class="number">34</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Amy&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;camperCat&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> names = users.<span class="title function_">map</span>(<span class="function"><span class="params">user</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>:user.<span class="property">name</span>,</span><br><span class="line">        <span class="string">&quot;age&quot;</span>:user.<span class="property">age</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> names = users.<span class="title function_">map</span>(<span class="function"><span class="params">user</span> =&gt;</span> user.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(names);</span><br></pre></td></tr></table></figure>



<h3 id="Map与Object比较"><a href="#Map与Object比较" class="headerlink" title="Map与Object比较"></a>Map与Object比较</h3><p>一般地，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object">objects</a>会被用于将字符串类型映射到数值。<code>Object</code>允许设置键值对、根据键获取值、删除键、检测某个键是否存在。而<code>Map</code>具有更多的优势。</p>
<ul>
<li><code>Object</code>的键均为<code>Strings</code>类型，在<code>Map</code>里键可以是任意类型。</li>
<li>必须手动计算<code>Object</code>的尺寸，但是可以很容易地获取使用<code>Map</code>的尺寸。</li>
<li><code>Map</code>的遍历遵循元素的插入顺序。</li>
<li><code>Object</code>有原型，所以映射中有一些缺省的键。（可以用 <code>map = Object.create(null) 回避</code>）。</li>
</ul>
<p>这三条提示可以帮你决定用<code>Map</code>还是<code>Object</code>：</p>
<ul>
<li>如果键在运行时才能知道，或者所有的键类型相同，所有的值类型相同，那就使用<code>Map</code>。</li>
<li>如果需要将原始值存储为键，则使用<code>Map</code>，因为<code>Object</code>将每个键视为字符串，不管它是一个数字值、布尔值还是任何其他原始值。</li>
<li>如果需要对个别元素进行操作，使用<code>Object</code>。</li>
</ul>
<h3 id="WeakMap对象"><a href="#WeakMap对象" class="headerlink" title="WeakMap对象"></a>WeakMap对象</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakMap"><code>WeakMap</code></a>对象也是键值对的集合。它的<strong>键必须是对象类型</strong>，值可以是任意类型。它的键被弱保持，也就是说，当其键所指对象没有其他地方引用的时候，它会被 GC 回收掉。<code>WeakMap</code>提供的接口与<code>Map</code>相同。</p>
<p>与<code>Map</code>对象不同的是，<code>WeakMap</code>的键是不可枚举的。不提供列出其键的方法。列表是否存在取决于垃圾回收器的状态，是不可预知的。</p>
<p>对象内部的私有数据和方法被存储在<code>WeakMap</code>类型的<code>privates</code>变量中。所有暴露出的原型和情况都是公开的，而其他内容都是外界不可访问的，因为模块并未导出<code>privates</code>对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> privates = <span class="keyword">new</span> <span class="title class_">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Public</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> me = &#123;</span><br><span class="line">    <span class="comment">// Private data goes here</span></span><br><span class="line">  &#125;;</span><br><span class="line">  privates.<span class="title function_">set</span>(<span class="variable language_">this</span>, me);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Public</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">method</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> me = privates.<span class="title function_">get</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="comment">// Do stuff with private data in `me`...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Public</span>;</span><br></pre></td></tr></table></figure>

<h3 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h3><h4 id="Set对象"><a href="#Set对象" class="headerlink" title="Set对象"></a>Set对象</h4><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set"><code>Set</code></a>对象是一组值的集合，这些值是不重复的，可以按照添加顺序来遍历。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mySet = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">mySet.<span class="title function_">add</span>(<span class="number">1</span>);</span><br><span class="line">mySet.<span class="title function_">add</span>(<span class="string">&quot;some text&quot;</span>);</span><br><span class="line">mySet.<span class="title function_">add</span>(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line"></span><br><span class="line">mySet.<span class="title function_">has</span>(<span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line">mySet.<span class="title function_">delete</span>(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">mySet.<span class="property">size</span>; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> mySet) <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// &quot;some text&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="数组与集合之间转换"><a href="#数组与集合之间转换" class="headerlink" title="数组与集合之间转换"></a>数组与集合之间转换</h5><p>可以使用<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from"><code>Array.from</code></a>或<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax">展开操作符</a>来完成集合到数组的转换。同样，<code>Set</code>的构造器接受数组作为参数，可以完成从<code>Array</code>到<code>Set</code>的转换。需要重申的是，<code>Set</code>对象中的值不重复，所以数组转换为集合时，所有重复值将会被删除。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(mySet);</span><br><span class="line">[...mySet2];</span><br><span class="line"></span><br><span class="line">mySet2 = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]);</span><br></pre></td></tr></table></figure>

<h5 id="Array和Set的对比"><a href="#Array和Set的对比" class="headerlink" title="Array和Set的对比"></a>Array和Set的对比</h5><ul>
<li>数组中用于判断元素是否存在的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf"><code>indexOf</code></a> 函数效率低下。</li>
<li><code>Set</code>对象允许根据值删除元素，而数组中必须使用基于下标的 splice 方法。</li>
<li>数组的<code>indexOf</code>方法无法找到<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN"><code>NaN</code></a>值。</li>
<li><code>Set</code>对象存储不重复的值，所以不需要手动处理包含重复值的情况。</li>
</ul>
<h4 id="WeakSet对象"><a href="#WeakSet对象" class="headerlink" title="WeakSet对象"></a>WeakSet对象</h4><p>与<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set"><code>Set</code></a>对象的主要区别有：</p>
<ul>
<li><code>WeakSets</code>中的值必须是对象类型，不可以是别的类型</li>
<li><code>WeakSet</code>的“<em>weak</em>”指的是，对集合中的对象，如果不存在其他引用，那么该对象将可被垃圾回收。于是不存在一个当前可用对象组成的列表，所以<code>WeakSets</code>不可枚举</li>
</ul>
<p><code>WeakSet</code>的用例很有限，比如使用 DOM 元素作为键来追踪它们而不必担心内存泄漏。</p>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>你可以用 <code>throw</code> 语句抛出一个异常并且用 <code>try...catch</code> 语句捕获处理它。</p>
<h4 id="catch-块"><a href="#catch-块" class="headerlink" title="catch 块"></a><code>catch</code> 块</h4><p>你可以使用<code>catch</code>块来处理所有可能在<code>try</code>块中产生的异常。</p>
<h4 id="finally块"><a href="#finally块" class="headerlink" title="finally块"></a><code>finally</code>块</h4><p><code>finally</code>块包含了在 try 和 catch 块完成后、下面接着 try…catch 的语句之前执行的语句。<code>finally</code>块无论是否抛出异常都会执行。如果抛出了一个异常，就算没有异常处理，<code>finally</code>块里的语句也会执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">openMyFile</span>();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="title function_">writeMyFile</span>(theData); <span class="comment">//This may throw a error</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">    <span class="title function_">handleError</span>(e); <span class="comment">// If we got a error we handle it</span></span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="title function_">closeMyFile</span>(); <span class="comment">// always close the resource</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getMonthName</span>(<span class="params">mo</span>) &#123;</span><br><span class="line">  mo = mo - <span class="number">1</span>; <span class="comment">// Adjust month number for array index (1 = Jan, 12 = Dec)</span></span><br><span class="line">  <span class="keyword">var</span> months = [<span class="string">&quot;Jan&quot;</span>,<span class="string">&quot;Feb&quot;</span>,<span class="string">&quot;Mar&quot;</span>,<span class="string">&quot;Apr&quot;</span>,<span class="string">&quot;May&quot;</span>,<span class="string">&quot;Jun&quot;</span>,<span class="string">&quot;Jul&quot;</span>,</span><br><span class="line">                <span class="string">&quot;Aug&quot;</span>,<span class="string">&quot;Sep&quot;</span>,<span class="string">&quot;Oct&quot;</span>,<span class="string">&quot;Nov&quot;</span>,<span class="string">&quot;Dec&quot;</span>];</span><br><span class="line">  <span class="keyword">if</span> (months[mo]) &#123;</span><br><span class="line">    <span class="keyword">return</span> months[mo];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&quot;InvalidMonthNo&quot;</span>; <span class="comment">//throw keyword is used here</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123; <span class="comment">// statements to try</span></span><br><span class="line">  monthName = <span class="title function_">getMonthName</span>(myMonth); <span class="comment">// function could throw exception</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  monthName = <span class="string">&quot;unknown&quot;</span>;</span><br><span class="line">  <span class="title function_">logMyErrors</span>(e); <span class="comment">// pass exception object to error handler -&gt; yor own function</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="作用域（作用域链）"><a href="#作用域（作用域链）" class="headerlink" title="作用域（作用域链）"></a>作用域（作用域链）</h2><p>作用域是在程序运行时代码中的某些特定部分中变量、函数和对象的<strong>可访问性</strong>。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_65335111/article/details/124735548">(77条消息) 深入理解JS作用域和作用域链_码上十七的博客-CSDN博客_js作用域链的理解</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/destinytaoer/article/details/82114848">(77条消息) JS 作用域和作用域链_destinytaoer的博客-CSDN博客_js作用域和作用域链</a></p>
<h2 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h2><p><a target="_blank" rel="noopener" href="http://c.biancheng.net/js/bom/">JS BOM（浏览器对象模型） (biancheng.net)</a></p>
<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document_Object_Model/Introduction">DOM 概述 - Web API 接口参考 | MDN (mozilla.org)</a></p>
<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><table>
<thead>
<tr>
<th align="left">JavaScript 类型</th>
<th align="left">JSON 的不同点</th>
</tr>
</thead>
<tbody><tr>
<td align="left">对象和数组</td>
<td align="left">属性名称必须是双引号括起来的字符串；最后一个属性后不能有逗号。</td>
</tr>
<tr>
<td align="left">数值</td>
<td align="left">禁止出现前导零（ JSON.stringify 方法自动忽略前导零，而在 JSON.parse 方法中将会抛出 SyntaxError）；如果有小数点，则后面至少跟着一位数字。</td>
</tr>
<tr>
<td align="left">字符串</td>
<td align="left">只有有限的一些字符可能会被转义；禁止某些控制字符； Unicode 行分隔符（<a target="_blank" rel="noopener" href="https://unicode-table.com/cn/2028/">U+2028</a>）和段分隔符（<a target="_blank" rel="noopener" href="https://unicode-table.com/cn/2029/">U+2029</a>）被允许 ; 字符串必须用双引号括起来。请参考下面的示例，可以看到 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse"><code>JSON.parse()</code></a> 能够正常解析，但将其当作 JavaScript 解析时会抛出 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError"><code>SyntaxError</code></a> 错误：<code>let code = &#39;&quot;\u2028\u2029&quot;&#39;; JSON.parse(code);  // 正常 eval(code);  // 错误</code></td>
</tr>
</tbody></table>
<p>在<code>JSONNumber</code>（数字内部不允许包含空格）或<code>JSONString</code>（字符串内部的空格被解释为相应的字符，否则就有问题了）之外的任何位置可以有多余的空白字符。JSON 只支持这些空白字符： 制表符（<a target="_blank" rel="noopener" href="https://unicode-table.com/en/0009/">U+0009</a>），回车（<a target="_blank" rel="noopener" href="https://unicode-table.com/en/000D/">U+000D</a>），换行（<a target="_blank" rel="noopener" href="https://unicode-table.com/en/0020/">U+00</a>0A）以及空格（<a target="_blank" rel="noopener" href="https://unicode-table.com/en/0020/">U+0020</a>）。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse"><code>JSON.parse()</code></a></p>
<p>解析 JSON 字符串并返回对应的值，可以额外传入一个转换函数，用来将生成的值和其属性，在返回之前进行某些修改。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"><code>JSON.stringify()</code></a></p>
<p>返回与指定值对应的 JSON 字符串，可以通过额外的参数，控制仅包含某些属性，或者以自定义方法来替换某些 key 对应的属性值。</p>
<h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><p>AJAX 是异步的 JavaScript 和 XML（<strong>A</strong>synchronous <strong>J</strong>avaScript <strong>A</strong>nd <strong>X</strong>ML）。简单点说，就是使用 <code>XMLHttpRequest</code> 对象与服务器通信。 它可以使用 JSON，XML，HTML 和 text 文本等格式发送和接收数据。AJAX 最吸引人的就是它的“异步”特性，也就是说它可以在不重新刷新页面的情况下与服务器通信，交换数据，或更新页面。</p>
<p>你可以使用 AJAX 最主要的两个特性做下列事：</p>
<ul>
<li>在不重新加载页面的情况下发送请求给服务器。</li>
<li>接受并使用从服务器发来的数据。</li>
</ul>
<h3 id="Step1——发送http请求"><a href="#Step1——发送http请求" class="headerlink" title="Step1——发送http请求"></a>Step1——发送http请求</h3><p>创建一个包含必要函数功能的对象实例（<code>XMLHttpRequest</code>）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建XMLHttp 实例</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>) &#123; <span class="comment">// Mozilla, Safari, IE7+ ...</span></span><br><span class="line">    httpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">ActiveXObject</span>) &#123; <span class="comment">// IE 6 and older</span></span><br><span class="line">    httpRequest = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>发送请求后会收到响因，此时需要告知 XMLHttp 请求对象是由哪一个 JavaScript 函数处理响应，在设置了对象的 <code>onreadystatechange </code>属性后给他命名，当请求状态改变时调用函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpRequest.<span class="property">onreadystatechange</span> = nameOfTheFunction;</span><br></pre></td></tr></table></figure>

<p>要注意的是，函数名后没有参数，因为你把一个引用赋值给了函数，而不是真正的调用了它。 此外，如果不使用函数名的方式，你还可以用 JavaScript 的匿名函数响应处理的动作，就像下面这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">httpRequest.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// Process the server response here.</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>接下来，声明当你接到响应后要做什么，你要发送一个实际的请求，通过调用 HTTP 请求对象的 <code>open()</code> 和 <code>send()</code> 方法，像下面这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">httpRequest.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://www.example.org/some.file&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">httpRequest.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li><code>open()</code> 的第一个参数是 HTTP 请求方法 - 有 GET，POST，HEAD 以及服务器支持的其他方法。 保证这些方法一定要是大写字母，否则其他一些浏览器（比如 FireFox）可能无法处理这个请求。更多关于 HTTP 的请求方法，可以查看 <a target="_blank" rel="noopener" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">W3C specs</a>。</li>
<li>第二个参数是你要发送的 URL。由于安全原因，默认不能调用第三方 URL 域名。 确保你在页面中使用的是正确的域名，否则在调用 <code>open()</code> 方法是会有 “permission denied” 错误提示。一个容易犯的错误是你企图通过 <code>domain.tld</code> 访问网站， 而不是使用 <code>www.domain.tld</code>。如果你真的需要向另一个域名发送请求，可以查看 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/HTTP_access_control">HTTP access control</a>。</li>
<li>第三个参数是可选的，用于设置请求是否是异步的。如果设为 <code>true</code> (默认值)，即开启异步，JavaScript 就不会在此语句阻塞，使得用户能在服务器还没有响应的情况下与页面进行交互。</li>
</ul>
<p><code>send()</code> 方法的参数可以是任何你想发送给服务器的内容，如果是 <code>POST</code> 请求的话。发送表单数据时应该用服务器可以解析的格式，像查询语句：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;name=value&amp;anothername=&quot;</span>+<span class="built_in">encodeURIComponent</span>(myVar)+<span class="string">&quot;&amp;so=on&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果你使用 POST 数据，那就需要设置请求的 MIME 类型。比如，在调用 <code>send()</code> 方法获取表单数据前要有下面这个：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpRequest.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Step2——处理服务器响因"><a href="#Step2——处理服务器响因" class="headerlink" title="Step2——处理服务器响因"></a>Step2——处理服务器响因</h3><p>在发送请求时，你提供的 JavaScript 函数名负责处理响应：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpRequest.<span class="property">onreadystatechange</span> = nameOfTheFunction;</span><br></pre></td></tr></table></figure>

<p>这个函数应该做什么？首先，函数要检查请求的状态。如果状态的值是 <code>XMLHttpRequest.DONE</code> （对应的值是 4），意味着服务器响应收到了并且是没问题的，然后就可以继续执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (httpRequest.<span class="property">readyState</span> === <span class="title class_">XMLHttpRequest</span>.<span class="property">DONE</span>) &#123;</span><br><span class="line">    <span class="comment">// Everything is good, the response was received.</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Not ready yet.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>全部 readyState 状态值都在 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#properties">XMLHTTPRequest.readyState</a>，如下也是：</p>
<ul>
<li>0 (未初始化) or (<strong>请求还未初始化</strong>)</li>
<li>1 (正在加载) or (<strong>已建立****服务器链接</strong>)</li>
<li>2 (加载成功) or (<strong>请求已接受</strong>)</li>
<li>3 (交互) or (<strong>正在处理请求</strong>)</li>
<li>4 (完成) or (<strong>请求已完成并且响应已准备好</strong>)</li>
</ul>
<p>接下来，点击 HTTP 响应的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/HTTP#http_response_codes">response code</a>。 可能的响应码都已经列在 <a target="_blank" rel="noopener" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">W3C</a>这个列表里。在下面的例子中，我们通过检查响应码 <code>200 OK</code> 判断 AJAX 有没有成功。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (httpRequest.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// Perfect!</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// There was a problem with the request.</span></span><br><span class="line">    <span class="comment">// For example, the response may have a 404 (Not Found)</span></span><br><span class="line">    <span class="comment">// or 500 (Internal Server Error) response code.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在检查完请求状态和 HTTP 响应码后， 你就可以用服务器返回的数据做任何你想做的了。你有两个方法去访问这些数据：</p>
<ul>
<li><code>httpRequest.responseText</code> – 服务器以文本字符的形式返回</li>
<li><code>httpRequest.responseXML</code> – 以 XMLDocument 对象方式返回，之后就可以使用 JavaScript 来处理</li>
</ul>
<p>注意上面这一步只在你发起异步请求时有效（即 <code>open()</code> 的第三个参数未特别指定或设为 <code>true</code>）。如果你你发起的是<strong>同步</strong>请求则不必使用函数，但是非常不推荐这样子做，它的用户体验很糟糕。</p>
<h3 id="Step3——简单的http请求"><a href="#Step3——简单的http请求" class="headerlink" title="Step3——简单的http请求"></a>Step3——简单的http请求</h3><p>这个 JavaScript 会请求一个 HTML 文档 <code>test.html</code>，包含 “I’m a test” 内容。然后我们 <code>alert()</code> 响应的内容。注意这个例子我们只是用了 JavaScript，没有用 jQuery。而且，HTML，XML 和 PHP 文件都要放在用一个目录下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;button id=<span class="string">&quot;ajaxButton&quot;</span> type=<span class="string">&quot;button&quot;</span>&gt;<span class="title class_">Make</span> a request&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">var</span> httpRequest;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;ajaxButton&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, makeRequest);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">makeRequest</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    httpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (!httpRequest) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">alert</span>(<span class="string">&#x27;Giving up :( Cannot create an XMLHTTP instance&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    httpRequest.<span class="property">onreadystatechange</span> = alertContents;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    httpRequest.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;test.html&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    httpRequest.<span class="title function_">send</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">alertContents</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (httpRequest.<span class="property">readyState</span> === <span class="title class_">XMLHttpRequest</span>.<span class="property">DONE</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (httpRequest.<span class="property">status</span> === <span class="number">200</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">alert</span>(httpRequest.<span class="property">responseText</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">alert</span>(<span class="string">&#x27;There was a problem with the request.&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>用户点击 “Make a request” 按钮；</li>
<li>事件处理调用 <code>makeRequest()</code> 函数；</li>
<li>请求已通过然后（<code>onreadystatechange</code>）传给 <code>alertContents()</code> 执行。</li>
<li><code>alertContents()</code> 检查返回的响应是否 OK，然后 <code>alert()</code> <code>test.html</code> 文件内容。</li>
</ul>
<blockquote>
<p><strong>Note</strong>: 如果你向一个代码片段发送请求，将返回 XML，而不是静态 XML 文件，在 IE 浏览器上则必须要设置响应头才能正常工作。如果不设置响应头为 <code>Content-Type:application/xml</code> ，IE 浏览器会在你访问 XML 元素时抛出 “Object Expected” 错误。</p>
<p><strong>Note 2</strong>: 如果不设置响应头 <code>Cache-Control: no-cache</code> 浏览器将会把响应缓存下来而且再也无法重新提交请求。你也可以添加一个总是不同的 GET 参数，比如时间戳或者随机数 (详情见 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/DOM/XMLHttpRequest/Using_XMLHttpRequest#bypassing_the_cache">bypassing the cache</a>)</p>
<p><strong>Note 3</strong>: 如果变量 <code>httpRequest</code> 在全局范围内使用，它会在 <code>makeRequest()</code> 函数中被相互覆盖，从而导致资源竞争。为了避免这个情况，请在包含 AJAX 函数的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures">闭包</a>中声明 <code>httpRequest </code>变量。</p>
</blockquote>
<p>在通信错误的事件中（例如服务器宕机），在访问响应状态 onreadystatechange 方法中会抛出一个例外。为了缓和这种情况，则可以使用 <code>try...catch</code> 把 <code>if...then</code> 语句包裹起来。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">alertContents</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (httpRequest.<span class="property">readyState</span> === <span class="title class_">XMLHttpRequest</span>.<span class="property">DONE</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (httpRequest.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(httpRequest.<span class="property">responseText</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;There was a problem with the request.&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span>( e ) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Caught Exception: &#x27;</span> + e.<span class="property">description</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Step4——处理XML响因"><a href="#Step4——处理XML响因" class="headerlink" title="Step4——处理XML响因"></a>Step4——处理XML响因</h3><p>在上一个例子中，在收到 HTTP 请求的响应后我们会请求对象的 <code>responseText</code> 属性，包含 <code>test.html</code> 文件的内容。现在我们试试 <code>responseXML </code>属性。 </p>
<p>首先，我们创建一个稍后将要请求的有效的 XML 文档。文档（<code>test.html</code>）包含以下内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> ?&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">root</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    I&#x27;m a test.</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>在脚本里我们只需要把请求行改为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">onclick=<span class="string">&quot;makeRequest(&#x27;test.xml&#x27;)&quot;</span>&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>然后在 <code>alertContents()</code> 里，我们把 <code>alert(httpRequest.responseText)</code> 改为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xmldoc = httpRequest.<span class="property">responseXML</span>;</span><br><span class="line"><span class="keyword">var</span> root_node = xmldoc.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;root&#x27;</span>).<span class="title function_">item</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_">alert</span>(root_node.<span class="property">firstChild</span>.<span class="property">data</span>);</span><br></pre></td></tr></table></figure>

<p>这部分代码采用 <code>responseXML</code> 提供的 <code>XMLDocument</code> 对象，并使用 DOM 方法访问 XML 文档中包含的一些数据。你可以在<a target="_blank" rel="noopener" href="https://www.w3clubs.com/mozdev/test.xml">这里</a>查看 <code>test.xml</code> 并且在<a target="_blank" rel="noopener" href="https://www.w3clubs.com/mozdev/httprequest_test_xml.html">这里</a>更新测试代码。</p>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><h4 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h4><h2 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h2><p>在 JavaScript 里，我们会经常遇到不需要给函数命名的情况，尤其是在需要将一个函数作为参数传给另外一个函数的时候。 这时，我们会创建匿名函数。 因为这些函数不会在其他地方复用，所以我们不需要给它们命名。</p>
<p>这种情况下，我们通常会使用以下语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myFunc = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> myVar = <span class="string">&quot;value&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> myVar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ES6 提供了其他写匿名函数的方式的语法糖。 你可以使用<strong>箭头函数</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">myFunc</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> myVar = <span class="string">&quot;value&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> myVar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当不需要函数体，只返回一个值的时候，箭头函数允许你省略 <code>return</code> 关键字和外面的大括号。 这样就可以将一个简单的函数简化成一个单行语句。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">myFunc</span> = (<span class="params"></span>) =&gt; <span class="string">&quot;value&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>这段代码默认会返回字符串 <code>value</code>。</p>
<h4 id="简洁写法"><a href="#简洁写法" class="headerlink" title="简洁写法"></a>简洁写法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">multiplier</span> = (<span class="params">item, multi</span>) =&gt; item * multi;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getMousePosition</span> = (<span class="params">x, y</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      	<span class="attr">x</span>: x,</span><br><span class="line">  		<span class="attr">y</span>: y</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getMousePosition</span> = (<span class="params">x, y</span>) =&gt; (&#123;</span><br><span class="line">  <span class="attr">x</span>: x,</span><br><span class="line">  <span class="attr">y</span>: y</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getMousePosition</span> = (<span class="params">x, y</span>) =&gt; (&#123; x, y &#125;);</span><br></pre></td></tr></table></figure>

<p><code>()=&gt;&#123;return&#123;&#125;&#125;</code>&#x3D;&#x3D;<code>()=&gt;(&#123;&#125;)</code></p>
<h4 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">greeting</span> = (<span class="params">name = <span class="string">&quot;Anonymous&quot;</span></span>) =&gt; <span class="string">&quot;Hello &quot;</span> + name;</span><br></pre></td></tr></table></figure>

<h4 id="rest操作符"><a href="#rest操作符" class="headerlink" title="rest操作符"></a>rest操作符</h4><p>rest 操作符可以用于创建有一个变量来接受多个参数的函数。 这些参数被储存在一个可以在函数内部读取的数组中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">howMany</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;You have passed &quot;</span> + args.<span class="property">length</span> + <span class="string">&quot; arguments.&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>sum</code> 函数可以接收任意数量的参数，并返回它们的总和。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">   <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="展开操作符"><a href="#展开操作符" class="headerlink" title="展开操作符"></a>展开操作符</h4><p>将数组展开成一系列由逗号分隔的参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">6</span>, <span class="number">89</span>, <span class="number">3</span>, <span class="number">45</span>];</span><br><span class="line"><span class="keyword">const</span> [a, b, ...arr] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">const</span> maximus = <span class="title class_">Math</span>.<span class="title function_">max</span>(...arr);</span><br></pre></td></tr></table></figure>

<h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&#x27;John Doe&#x27;</span>, <span class="attr">age</span>: <span class="number">34</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> &#123; name, age &#125; = user;</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">name</span>: userName, <span class="attr">age</span>: userAge &#125; = user;</span><br><span class="line"><span class="comment">//解构嵌套对象中的值</span></span><br><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">johnDoe</span>: &#123; </span><br><span class="line">    <span class="attr">age</span>: <span class="number">34</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;johnDoe@freeCodeCamp.com&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">johnDoe</span>: &#123; <span class="attr">age</span>: userAge, <span class="attr">email</span>: userEmail &#125;&#125; = user;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数参数中解构对象</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">profileUpdate</span> = (<span class="params">&#123; name, age, nationality, location &#125;</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="解构数组"><a href="#解构数组" class="headerlink" title="解构数组"></a>解构数组</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b);<span class="comment">//1, 2</span></span><br><span class="line"><span class="keyword">const</span> [a, b,,, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c);<span class="comment">//1, 2, 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [a, b, ...arr] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b);<span class="comment">//1, 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);<span class="comment">//[3, 4, 5, 7]</span></span><br></pre></td></tr></table></figure>

<h4 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Zodiac Hasbro&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">56</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> greeting = <span class="string">`Hello, my name is <span class="subst">$&#123;person.name&#125;</span>!</span></span><br><span class="line"><span class="string">I am <span class="subst">$&#123;person.age&#125;</span> years old.`</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greeting);<span class="comment">// Hello, my name is Zodiac Hasbro! 和 I am 56 years old.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="编写简洁的对象字面量声明"><a href="#编写简洁的对象字面量声明" class="headerlink" title="编写简洁的对象字面量声明"></a>编写简洁的对象字面量声明</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getMousePosition</span> = (<span class="params">x, y</span>) =&gt; (&#123;</span><br><span class="line">  <span class="attr">x</span>: x,</span><br><span class="line">  <span class="attr">y</span>: y</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//getMousePosition 简单的函数，返回拥有两个属性的对象。 ES6 提供了一个语法糖，消除了类似 x: x 这种冗余的写法。 你可以只写一次 x，解释器会自动将其转换成 x: x（或效果相同的内容）。 下面是使用这种语法重写的同样的函数：</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getMousePosition</span> = (<span class="params">x, y</span>) =&gt; (&#123; x, y &#125;);</span><br></pre></td></tr></table></figure>

<h4 id="编写简洁的函数说明"><a href="#编写简洁的函数说明" class="headerlink" title="编写简洁的函数说明"></a>编写简洁的函数说明</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Taylor&quot;</span>,</span><br><span class="line">  <span class="attr">sayHello</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello! My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>.`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Taylor&quot;</span>,</span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello! My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>.`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="class语法构建函数"><a href="#class语法构建函数" class="headerlink" title="class语法构建函数"></a>class语法构建函数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Taylor&quot;</span>,</span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello! My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>.`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//class的应用</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpaceShuttle</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">targetPlanet</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">targetPlanet</span> = targetPlanet;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> zeus = <span class="keyword">new</span> <span class="title class_">SpaceShuttle</span>(<span class="string">&#x27;Jupiter&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">author</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_author</span> = author;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// getter(变量名不能与get或set重名（author!=writer）)</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">writer</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_author</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// setter</span></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">writer</span>(<span class="params">updatedAuthor</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_author</span> = updatedAuthor;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="模块脚本"><a href="#模块脚本" class="headerlink" title="模块脚本"></a>模块脚本</h4><p>为了让 JavaScript 更模块化、更整洁以及更易于维护，ES6 引入了在多个 JavaScript 文件之间共享代码的机制。 它可以导出文件的一部分供其它文件使用，然后在需要它的地方按需导入。 为了使用这一功能， 需要在 HTML 文档里创建一个 <code>type</code> 为 <code>module</code> 的脚本。 例子如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;filename.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>假设有一个文件 <code>math_functions.js</code>，该文件包含了数学运算相关的一些函数。 其中一个存储在变量 <code>add</code> 里，该函数接受两个数字作为参数返回它们的和。 你想在几个不同的 JavaScript 文件中使用这个函数。 要实现这个目的，就需要 <code>export</code> 它。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">x, y</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/////</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">x, y</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; add, subtract &#125;;</span><br><span class="line"><span class="comment">//默认导出的 export,在文件中只有一个值需要导出的时候，通常会使用这种语法。 它也常常用于给文件或者模块创建返回值。</span></span><br><span class="line"><span class="comment">//命名函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//匿名函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//导出方式</span></span><br><span class="line"><span class="keyword">import</span> add <span class="keyword">from</span> <span class="string">&quot;./math_functions.js&quot;</span>;</span><br></pre></td></tr></table></figure>

<p><code>import</code> 可以导入文件或模块的一部分。 在之前的课程里，例子从 <code>math_functions.js</code> 文件里导出了 <code>add</code>。 下面看一下如何在其它文件导入它：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add, subtract &#125; <span class="keyword">from</span> <span class="string">&#x27;./math_functions.js&#x27;</span>;</span><br><span class="line"><span class="title function_">uppercaseString</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> myMathModule <span class="keyword">from</span> <span class="string">&quot;./math_functions.js&quot;</span>;</span><br><span class="line">stringFunctions.<span class="title function_">uppercaseString</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">stringFunctions.<span class="title function_">lowercaseString</span>(<span class="string">&quot;WORLD!&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h4><p>Promise 是异步编程的一种解决方案 - 它在未来的某时会生成一个值。 任务完成，分执行成功和执行失败两种情况。 <code>Promise</code> 是构造器函数，需要通过 <code>new</code> 关键字来创建。 构造器参数是一个函数，该函数有两个参数 - <code>resolve</code> 和 <code>reject</code>。 通过它们来判断 promise 的执行结果。 用法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Promise 有三个状态：<code>pending</code>、<code>fulfilled</code> 和 <code>rejected</code>。上述例子里创建的 promise 一直阻塞在 <code>pending</code> 状态里，因为没有调用 promise 的完成方法。 Promise 提供的 <code>resolve</code> 和 <code>reject</code> 参数就是用来结束 promise 的。 Promise 成功时调用 <code>resolve</code>，promise 执行失败时调用 <code>reject</code>， 如下文所述，这些方法需要有一个参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(condition here) &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;Promise was fulfilled&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&quot;Promise was rejected&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//回调函数</span></span><br><span class="line">myPromise.<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">	</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p> 当 promise 完成 <code>resolve</code> 时会触发 <code>then</code> 方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myPromise.<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>当 promise 失败时会调用 <code>catch</code> 方法。 当 promise 的 <code>reject</code> 方法执行时会直接调用。 用法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myPromise.<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.包含在斜杠之间</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/ab+c/</span>;</span><br><span class="line"><span class="comment">//2.调用RegExp对象的构造函数</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;ab+c&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="简单模式"><a href="#简单模式" class="headerlink" title="简单模式"></a>简单模式</h3><p><code>/abc/</code>能且仅能匹配 “abc” 字符按照顺序同时出现的情况。比如”Gr<strong>ab c</strong>rab” 会匹配失败，因为中间存在空格使得<code>abc</code>不连续</p>
<h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><p>表示一个匹配在某些条件下发生。断言包含先行断言、后行断言和条件表达式。</p>
<h4 id="边界类断言"><a href="#边界类断言" class="headerlink" title="边界类断言"></a>边界类断言</h4><table>
<thead>
<tr>
<th align="center">字符</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>^</code></td>
<td align="left">匹配输入的开头，多行模式为true时，可以匹配<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%AD%97%E7%AC%A6%E4%B8%B2&spm=1001.2101.3001.7020">字符串</a>开头（字符串的开始位置），也可以匹配行的开头（即换行符\n之后的位置）（<code>/^A/</code> 匹配不了 “an A” 里面的 “A”，但是可以匹配 “An A” 里面第一个 “A”。）</td>
</tr>
<tr>
<td align="center"><code>$</code></td>
<td align="left">匹配输入的结束，多行模式为true时，可以匹配字符串结尾（字符串的结束位置）, 也可以匹配行的结尾（即换行符\n之前的位置）（比如 <code>/t$/</code> 不能匹配 “eater” 中的 “t”，但是可以匹配 “eat” 中的 “t”。）</td>
</tr>
<tr>
<td align="center"><code>\b</code></td>
<td align="left">匹配一个单词的边界，这是一个字的字符前后没有另一个字的字符位置，例如在字母和空格之间。(<code>/\bm/</code>在 “moon” 中匹配到 “m”)(<code>/oo\b/</code>在 “moon” 中不会匹配到 “oo”, 因为 “oo” 后面跟着 “n” 这个单词字符)(<code>/oon\b/</code>在 “moon” 中匹配 “oon”， 因为 “oon” 是这个字符串的结尾，因此后面没有单词字符)（<code>/\w\b\w/</code>将永远不会匹配任何东西，因为一个单词字符后面永远不会有非单词字符和单词字符。）</td>
</tr>
<tr>
<td align="center"><code>\B</code></td>
<td align="left">匹配非单词边界。这是上一个字符和下一个字符属于同一类型的位置：要么两者都必须是单词，要么两者都必须是非单词，例如在两个字母之间或两个空格之间。字符串的开头和结尾被视为非单词。与匹配的词边界相同，匹配的非词边界也不包含在匹配中。例如，<code>/\Bon/</code> 在 “at noon” 中匹配 “on” ，<code>/ye\B/</code> 在 “possibly yesterday”中匹配”ye” 。</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例1 （匹配输入的开头）</span></span><br><span class="line"><span class="keyword">let</span> fruits = [<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Watermelon&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Avocado&quot;</span>, <span class="string">&quot;Strawberry&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用正则 /^A/ 选择以&#x27;A&#x27;开头的水果。</span></span><br><span class="line"><span class="comment">// 这里的 &#x27;^&#x27; 只有一种含义：匹配输入的开头。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fruitsStartsWithA = fruits.<span class="title function_">filter</span>(<span class="function"><span class="params">fruit</span> =&gt;</span> <span class="regexp">/^A/</span>.<span class="title function_">test</span>(fruit));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruitsStartsWithA); <span class="comment">// [ &#x27;Apple&#x27;, &#x27;Avocado&#x27; ]</span></span><br><span class="line"><span class="comment">//例2 匹配不是 ‘A’开头的</span></span><br><span class="line"><span class="keyword">let</span> fruits = [<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Watermelon&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Avocado&quot;</span>, <span class="string">&quot;Strawberry&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用正则 /^[^A]/ 选择 不是以 ‘A’ 开头的水果</span></span><br><span class="line"><span class="comment">// 在这个例子中，“^” 控件符号表示两种含义：</span></span><br><span class="line"><span class="comment">// 1) 匹配输入的开头</span></span><br><span class="line"><span class="comment">// 2) 一个否定的字符集: [^A] ，意思是匹配不是 ‘A’ 的字符</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fruitsStartsWithNotA = fruits.<span class="title function_">filter</span>(<span class="function"><span class="params">fruit</span> =&gt;</span> <span class="regexp">/^[^A]/</span>.<span class="title function_">test</span>(fruit));</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruitsStartsWithNotA); <span class="comment">// [ &#x27;Watermelon&#x27;, &#x27;Orange&#x27;, &#x27;Strawberry&#x27; ]</span></span><br></pre></td></tr></table></figure>

<h4 id="其他断言"><a href="#其他断言" class="headerlink" title="其他断言"></a>其他断言</h4><table>
<thead>
<tr>
<th align="left"><code>字符</code></th>
<th align="left"><code>含义</code></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>x(?=y)</code></td>
<td align="left"><strong>向前断言：</strong> x 被 y 跟随时匹配 x。例如，对于&#x2F;<code>Jack(?=Sprat)</code>&#x2F;，“Jack”在跟有“Sprat”的情况下才会得到匹配．&#96;&#x2F;Jack(?&#x3D;Sprat</td>
</tr>
<tr>
<td align="left"><code>x(?!y)</code></td>
<td align="left"><strong>向前否定断言：</strong> x 没有被 y 紧随时匹配 x。例如，对于<code>/\d+(?!\.)/</code>，数字后没有跟随小数点的情况下才会得到匹配。对于<code>/\d+(?!\.)/.exec(3.141)</code>，匹配‘141’而不是‘3’。</td>
</tr>
<tr>
<td align="left"><code>(?&lt;=y)x</code></td>
<td align="left"><strong>向后断言：</strong> x 跟随 y 的情况下匹配 x。例如，对于<code>/(?&lt;=Jack)Sprat/</code>，“Sprat”紧随“Jack”时才会得到匹配。对于&#96;&#x2F;(?&lt;&#x3D;Jack</td>
</tr>
<tr>
<td align="left"><code>(?&lt;!y)x</code></td>
<td align="left"><strong>向后否定断言：</strong> x 不跟随 y 时匹配 x。例如，对于<code>/(?&lt;!-)\d+/</code>，数字不紧随 - 符号的情况下才会得到匹配。对于<code>/(?&lt;!-)\d+/.exec(3)</code> ，“3”得到匹配。 而<code>/(?&lt;!-)\d+/.exec(-3)</code>的结果无匹配，这是由于数字之前有 - 符号。</td>
</tr>
</tbody></table>
<h3 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h3><table>
<thead>
<tr>
<th>字符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>.</code></td>
<td>匹配除行终止符之外的任何单个字符(<code>/.y/</code> 在“yes make my day”中匹配“my”和“ay”，而不是“yes”，而<code>/y./</code>匹配的是“ye”与“y”)</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>匹配任何数字 (阿拉伯数字)。相当于 <code>[0-9]</code>。例如，<code>/\d/</code> 或 <code>/[0-9]/</code> 匹配“B2is the suite number”中的“2”。</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>匹配任何非数字 (阿拉伯数字) 的字符。相当于<code>[^0-9]</code>。例如，<code>/\D/</code> 或者 <code>/[^0-9]/</code> 匹配“B2 is the suite number”中的“B”。</td>
</tr>
<tr>
<td><code>\w</code></td>
<td>匹配基本拉丁字母中的任何字母数字字符，包括下划线。相当于 <code>[A-Z，a-z，0-9，_]</code>。例如，<code>/\w/</code> 匹配“apple”中的“a”，“p”，“p”，“l”，“e”，匹配“$5.28”中的“5”，匹配“3D”中的“3”，以及匹配“Émanuel”中的“m”。</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>匹配任何不是来自基本拉丁字母的单词字符。相当于 <code>[^A-Za-z0-9_]</code>。例如，<code>/\W/</code> 或者 <code>/[^A-Za-z0-9_]/</code> 匹配“50%”中的“%”，以及匹配“Émanuel”中的“É”。</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>匹配单个空白字符，包括空格、制表符、换页符、换行符和其他 Unicode 空格。相当于 <code>[ \f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]</code>。例如，<code>/\s\w*/</code> 匹配“foo bar”中的“ bar”。</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>匹配除空格以外的单个字符。相当于 <code>[^ \f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]</code>。例如，<code>/\S\w*/</code> 匹配“foo bar”中的“foo”。</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>匹配水平制表符。</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>匹配回车符。</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>匹配换行符。</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>匹配垂直制表符。</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>匹配换页符。</td>
</tr>
<tr>
<td><code>[\b]</code></td>
<td>匹配退格键。如果您正在寻找单词边界字符（<code>\b</code>）</td>
</tr>
<tr>
<td><code>\0</code></td>
<td>匹配一个 NUL 字符。不要在此后面加上另一个数字。</td>
</tr>
<tr>
<td><code>\cX</code></td>
<td>使用<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Caret_notation">插入符号</a>匹配控制字符，其中“X”是 A–Z 中的一个字母（对应于代码点 <code>U+0001</code><em>–</em><code>U+001F</code>）。例如，<code>/\cM\cJ/</code>匹配“\r\n”。</td>
</tr>
<tr>
<td><code>\xhh</code></td>
<td>匹配与代码 <code>*hh*</code>（两个十六进制数字）对应的字符。</td>
</tr>
<tr>
<td><code>\uhhhh</code></td>
<td>匹配与值 <code>*hhhh*</code>（四个十六进制数字）对应的 UTF-16 代码单元。</td>
</tr>
<tr>
<td><code>\u&#123;hhhh&#125; 或 \u&#123;hhhhh&#125;</code></td>
<td>（仅当设置了 <code>u</code> 标志时。）匹配与 Unicode 值 <code>U+*hhhh*</code> 或 <code>U+*hhhhh*</code>（十六进制数字）对应的字符。</td>
</tr>
</tbody></table>
<h3 id="使用特殊字符"><a href="#使用特殊字符" class="headerlink" title="使用特殊字符"></a>使用特殊字符</h3><p>当你需要匹配一个不确定的字符串时，比如寻找一个或多个 “b”，或者寻找空格，可以在模式中使用特殊字符。比如，你可以使用 <code>/ab*c/</code> 去匹配一个单独的 “a” 后面跟了零个或者多个 “b”，同时后面跟着 “c” 的字符串：<code>*</code>的意思是前一项出现零次或者多次。在字符串 “abbbbc” 中，这个模式匹配了子字符串 “abbbbc”。</p>
<p>[-6,-1,<strong>5,4,1,-8,6,7,-3,6</strong>,0,-6,-7,8,-8,-4,1]</p>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>如果想要在字符串 <code>The dog chased the cat</code> 中匹配到 <code>the</code> 这个单词，可以使用如下正则表达式：<code>/the/</code>。 注意，正则表达式中不需要引号。</p>
<p>JavaScript 中有多种使用正则表达式的方法。 测试正则表达式的一种方法是使用 <code>.test()</code> 方法。 <code>.test()</code> 方法会把编写的正则表达式和字符串（即括号内的内容）完全匹配（区分大小写），如果成功匹配到字符，则返回 <code>true</code>，反之，返回 <code>false</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> testStr = <span class="string">&quot;freeCodeCamp&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> testRegex = <span class="regexp">/Code/</span>;</span><br><span class="line">testRegex.<span class="title function_">test</span>(testStr);</span><br></pre></td></tr></table></figure>

<h4 id="搜索多个模式"><a href="#搜索多个模式" class="headerlink" title="搜索多个模式|"></a>搜索多个模式<code>|</code></h4><p>这对于搜寻单个字符串非常有用，但仅限于一种匹配模式。 你可以使用 <code>alternation</code> 或 <code>OR</code> 操作符搜索多个模式： <code>|</code></p>
<p>此操作符匹配操作符前面或后面的字符。 例如，如果你想匹配 <code>yes</code> 或 <code>no</code>，你需要的正则表达式是 <code>/yes|no/</code>。</p>
<p>你还可以匹配多个规则，这可以通过添加更多的匹配模式来实现。 这些匹配模式将包含更多的 <code>OR</code> 操作符来分隔它们，比如<code>/yes|no|maybe/</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> petRegex = <span class="regexp">/dog|cat|bird|fish/</span></span><br></pre></td></tr></table></figure>

<h4 id="匹配忽略大小写"><a href="#匹配忽略大小写" class="headerlink" title="匹配忽略大小写"></a>匹配忽略大小写</h4><p>可以使用标志（flag）来匹配这两种情况。 标志有很多，不过这里我们只关注忽略大小写的标志——<code>i</code>。 可以通过将它附加到正则表达式之后来使用它。 这里给出使用该标志的一个实例 <code>/ignorecase/i</code>。 这个字符串可以匹配字符串 <code>ignorecase</code>、<code>igNoreCase</code> 和 <code>IgnoreCase</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myString = <span class="string">&quot;freeCodeCamp&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> fccRegex = <span class="regexp">/freecodecamp/i</span>; <span class="comment">// 修改这一行</span></span><br><span class="line"><span class="keyword">let</span> result = fccRegex.<span class="title function_">test</span>(myString);</span><br></pre></td></tr></table></figure>

<h4 id="提取找到的实际匹配项match"><a href="#提取找到的实际匹配项match" class="headerlink" title="提取找到的实际匹配项match"></a>提取找到的实际匹配项<code>match</code></h4><p>提取或搜寻<strong>一次</strong>模式匹配</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Hello, World!&quot;</span>.<span class="title function_">match</span>(<span class="regexp">/Hello/</span>);</span><br><span class="line"><span class="keyword">let</span> ourStr = <span class="string">&quot;Regular expressions&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ourRegex = <span class="regexp">/expressions/</span>;</span><br><span class="line">ourStr.<span class="title function_">match</span>(ourRegex);</span><br><span class="line"><span class="comment">//这里第一个 match 将返回 [&quot;Hello&quot;] 第二个将返回 [&quot;expressions&quot;]。</span></span><br></pre></td></tr></table></figure>

<p><strong>多次</strong>搜寻或提取模式匹配<code>g</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> repeatRegex = <span class="regexp">/Repeat/g</span>;</span><br><span class="line">testStr.<span class="title function_">match</span>(repeatRegex);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在正则表达式上可以有多个标志，比如 <code>/search/gi</code></p>
</blockquote>
<h4 id="用通配符匹配任何内容"><a href="#用通配符匹配任何内容" class="headerlink" title="用通配符匹配任何内容."></a>用通配符匹配任何内容<code>.</code></h4><p>通配符 <code>.</code> 将匹配任何一个字符。 通配符也叫 <code>dot</code> 或 <code>period</code>。 可以像使用正则表达式中任何其他字符一样使用通配符。 例如，如果想匹配 <code>hug</code>、<code>huh</code>、<code>hut</code> 和 <code>hum</code>，可以使用正则表达式 <code>/hu./</code> 匹配以上四个单词。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> humStr = <span class="string">&quot;I&#x27;ll hum a song&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> hugStr = <span class="string">&quot;Bear hug&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> huRegex = <span class="regexp">/hu./</span>;</span><br><span class="line">huRegex.<span class="title function_">test</span>(humStr);</span><br><span class="line">huRegex.<span class="title function_">test</span>(hugStr);</span><br></pre></td></tr></table></figure>

<h4 id="将单个字符与多种可能性匹配"><a href="#将单个字符与多种可能性匹配" class="headerlink" title="将单个字符与多种可能性匹配"></a>将单个字符与多种可能性匹配</h4><p>可以使用字符集 （character classes）更灵活的匹配字符。 可以把字符集放在方括号（<code>[</code> 和 <code>]</code>）之间来定义一组需要匹配的字符串。</p>
<p>例如，如果想要匹配 <code>bag</code>、<code>big</code> 和 <code>bug</code>，但是不想匹配 <code>bog</code>。 可以创建正则表达式 <code>/b[aiu]g/</code> 来执行此操作。 <code>[aiu]</code> 是只匹配字符 <code>a</code>、<code>i</code> 或者 <code>u</code> 的字符集。</p>
<blockquote>
<p>在字符集中，可以使用连字符（<code>-</code>）来定义要匹配的字符范围。</p>
<p>例如，要匹配小写字母 <code>a</code> 到 <code>e</code>，你可以使用 <code>[a-e]</code>。</p>
<p>使用连字符（<code>-</code>）匹配字符范围并不仅限于字母。 它还可以匹配一系列数字。</p>
<p>例如，<code>/[0-5]/</code> 匹配 <code>0</code> 和 <code>5</code> 之间的任意数字，包含 <code>0</code> 和 <code>5</code>。</p>
<p>此外，还可以在单个字符集中组合一系列字母和数字。</p>
<p><code>/[a-z0-9]/ig</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bigStr = <span class="string">&quot;big&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> bagStr = <span class="string">&quot;bag&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> bugStr = <span class="string">&quot;bug&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> bogStr = <span class="string">&quot;bog&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> bgRegex = <span class="regexp">/b[aiu]g/</span>;</span><br><span class="line">bigStr.<span class="title function_">match</span>(bgRegex);</span><br><span class="line">bagStr.<span class="title function_">match</span>(bgRegex);</span><br><span class="line">bugStr.<span class="title function_">match</span>(bgRegex);</span><br><span class="line">bogStr.<span class="title function_">match</span>(bgRegex);</span><br></pre></td></tr></table></figure>

<h4 id="匹配单个未指定的字符-（匹配字符串开始位置）"><a href="#匹配单个未指定的字符-（匹配字符串开始位置）" class="headerlink" title="匹配单个未指定的字符^（匹配字符串开始位置）"></a>匹配单个未指定的字符<code>^</code>（匹配字符串开始位置）</h4><p> <strong>匹配输入字符串的开始位置</strong>，除非在方括号(<code>[]</code>)表达式中使用，当该符号在方括号表达式中使用时，表示不接受该方括号表达式中的字符集合。要匹配 ^ 字符本身，请使用 ^。</p>
<p><code>[^abcd]</code></p>
<p>创建一个不想匹配的字符集合。 这些类型的字符集称为否定字符集（ negated character sets）。</p>
<p>要创建否定字符集，需要在开始括号后面和不想匹配的字符前面放置脱字符（即<code>^</code>）。</p>
<p>例如，<code>/[^aeiou]/gi</code> 匹配所有非元音字符。 注意，字符 <code>.</code>、<code>!</code>、<code>[</code>、<code>@</code>、<code>/</code> 和空白字符等也会被匹配，该否定字符集仅排除元音字符。</p>
<p><code>\^abcd</code></p>
<p>匹配输入字符串开始位置</p>
<h4 id="匹配出现一次或多次的字符"><a href="#匹配出现一次或多次的字符" class="headerlink" title="匹配出现一次或多次的字符+"></a>匹配出现一次或多次的字符<code>+</code></h4><p>有时，需要匹配出现一次或者连续多次的的字符（或字符组）。 这意味着它至少出现一次，并且可能重复出现。</p>
<p>可以使用 <code>+</code> 符号来检查情况是否如此。 记住，字符或匹配模式必须一个接一个地连续出现。 这就是说，字符必须一个接一个地重复。</p>
<p>例如，<code>/a+/g</code> 会在 <code>abc</code> 中匹配到一个匹配项，并且返回 <code>[&quot;a&quot;]</code>。 因为 <code>+</code> 的存在，它也会在 <code>aabc</code> 中匹配到一个匹配项，然后返回 <code>[&quot;aa&quot;]</code>。</p>
<p>如果它是检查字符串 <code>abab</code>，它将匹配到两个匹配项并且返回<code>[&quot;a&quot;, &quot;a&quot;]</code>，因为<code>a</code>字符不连续，在它们之间有一个<code>b</code>字符。 最后，因为在字符串 <code>bcd</code> 中没有 <code>a</code>，因此找不到匹配项。</p>
<h4 id="匹配出现零次或多次的字符"><a href="#匹配出现零次或多次的字符" class="headerlink" title="匹配出现零次或多次的字符*"></a>匹配出现零次或多次的字符<code>*</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> soccerWord = <span class="string">&quot;gooooooooal!&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> gPhrase = <span class="string">&quot;gut feeling&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> oPhrase = <span class="string">&quot;over the moon&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> goRegex = <span class="regexp">/go*/</span>;</span><br><span class="line">soccerWord.<span class="title function_">match</span>(goRegex);<span class="comment">//[&quot;goooooooo&quot;]</span></span><br><span class="line">gPhrase.<span class="title function_">match</span>(goRegex);<span class="comment">//[&quot;g&quot;]</span></span><br><span class="line">oPhrase.<span class="title function_">match</span>(goRegex);<span class="comment">//null</span></span><br></pre></td></tr></table></figure>

<h4 id="用惰性匹配来查找字符"><a href="#用惰性匹配来查找字符" class="headerlink" title="用惰性匹配来查找字符?"></a>用惰性匹配来查找字符<code>?</code></h4><p>在正则表达式中，贪婪（greedy）匹配会匹配到符合正则表达式匹配模式的字符串的最长可能部分，并将其作为匹配项返回。 另一种方案称为懒惰（lazy）匹配，它会匹配到满足正则表达式的字符串的最小可能部分。</p>
<p>可以将正则表达式 <code>/t[a-z]*i/</code> 应用于字符串 <code>&quot;titanic&quot;</code>。 这个正则表达式是一个以 <code>t</code> 开始，以 <code>i</code> 结束，并且中间有一些字母的匹配模式。</p>
<p>正则表达式默认是贪婪匹配，因此匹配返回为 <code>[&quot;titani&quot;]</code>。 它会匹配到适合该匹配模式的最大子字符串。</p>
<p>但是，你可以使用 <code>?</code> 字符来将其变成懒惰匹配。 调整后的正则表达式 <code>/t[a-z]*?i/</code> 匹配字符串 <code>&quot;titanic&quot;</code> 返回 <code>[&quot;ti&quot;]</code>。</p>
<h4 id="检查全部或无"><a href="#检查全部或无" class="headerlink" title="检查全部或无?"></a>检查全部或无<code>?</code></h4><p>有时，想要搜寻的匹配模式可能有不确定是否存在的部分。 尽管如此，还是想检查它们。</p>
<p>为此，可以使用问号 <code>?</code> 指定可能存在的元素。 这将检查前面的零个或一个元素。 可以将此符号视为前面的元素是可选的。</p>
<p>例如，美式英语和英式英语略有不同，可以使用问号来匹配两种拼写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> american = <span class="string">&quot;color&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> british = <span class="string">&quot;colour&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> rainbowRegex= <span class="regexp">/colou?r/</span>;</span><br><span class="line">rainbowRegex.<span class="title function_">test</span>(american);<span class="comment">//true</span></span><br><span class="line">rainbowRegex.<span class="title function_">test</span>(british);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>



<h4 id="匹配字符串结尾"><a href="#匹配字符串结尾" class="headerlink" title="匹配字符串结尾$"></a>匹配字符串结尾<code>$</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> theEnding = <span class="string">&quot;This is a never ending story&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> storyRegex = <span class="regexp">/story$/</span>;</span><br><span class="line">storyRegex.<span class="title function_">test</span>(theEnding);</span><br><span class="line"><span class="keyword">let</span> noEnding = <span class="string">&quot;Sometimes a story will have to end&quot;</span>;</span><br><span class="line">storyRegex.<span class="title function_">test</span>(noEnding);</span><br></pre></td></tr></table></figure>

<h4 id="匹配所有的字母和数字-w"><a href="#匹配所有的字母和数字-w" class="headerlink" title="匹配所有的字母和数字\w"></a>匹配所有的字母和数字<code>\w</code></h4><p>JavaScript 中与字母表匹配的最接近的元字符是<code>\w</code>。 这个缩写等同于<code>[A-Za-z0-9_]</code>。 此字符类匹配大写字母和小写字母以及数字。 注意，这个字符类也包含下划线字符 (<code>_</code>)。</p>
<p>有可能想要搜寻的匹配模式是非字母数字字符。</p>
<p>可以使用 <code>\W</code> 搜寻和 <code>\w</code> <strong>相反</strong>的匹配模式。 注意，相反匹配模式使用大写字母。 此缩写与 <code>[^A-Za-z0-9_]</code> 是一样的。</p>
<h4 id="匹配所有数字-d-D"><a href="#匹配所有数字-d-D" class="headerlink" title="匹配所有数字\d,\D"></a>匹配所有数字<code>\d</code>,<code>\D</code></h4><p>查找数字字符的缩写是 <code>\d</code>，注意是小写的 <code>d</code>。 这等同于元字符 <code>[0-9]</code>，它查找 0 到 9 之间任意数字的单个字符。</p>
<p>查找非数字字符的缩写是 <code>\D</code>。 这等同于字符串 <code>[^0-9]</code>，它查找不是 0 - 9 之间数字的单个字符。</p>
<h4 id="匹配空白字符-s"><a href="#匹配空白字符-s" class="headerlink" title="匹配空白字符\s"></a>匹配空白字符<code>\s</code></h4><p>可以使用 <code>\s</code> 搜寻空格，其中 <code>s</code> 是小写。 此匹配模式将匹配空格、回车符、制表符、换页符和换行符。 可以认为这类似于元字符 <code>[ \r\t\f\n\v]</code>。</p>
<p>使用 <code>\S</code> 搜寻非空白字符，其中 <code>s</code> 是大写。 此匹配模式将不匹配空格、回车符、制表符、换页符和换行符。 可以认为这类似于元字符 <code>[^ \r\t\f\n\v]</code>。</p>
<h4 id="指定匹配的上限和下限"><a href="#指定匹配的上限和下限" class="headerlink" title="指定匹配的上限和下限"></a>指定匹配的上限和下限</h4><p>可以使用数量说明符（quantity specifiers）指定匹配模式的上下限。 数量说明符与花括号（<code>&#123;</code> 和 <code>&#125;</code>）一起使用。 可以在花括号之间放两个数字，这两个数字代表匹配模式的上限和下限。</p>
<p>例如，要匹配出现 <code>3</code> 到 <code>5</code> 次字母 <code>a</code> 的在字符串 <code>ah</code>，正则表达式应为<code>/a&#123;3,5&#125;h/</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable constant_">A4</span> = <span class="string">&quot;aaaah&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">A2</span> = <span class="string">&quot;aah&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> multipleA = <span class="regexp">/a&#123;3,5&#125;h/</span>;</span><br><span class="line">multipleA.<span class="title function_">test</span>(<span class="variable constant_">A4</span>);</span><br><span class="line">multipleA.<span class="title function_">test</span>(<span class="variable constant_">A2</span>);</span><br><span class="line"><span class="comment">//============</span></span><br><span class="line"><span class="comment">//修改正则表达式 ohRegex 以匹配出现 3 到 6 次字母 h 的字符串 Oh no。</span></span><br><span class="line"><span class="keyword">let</span> ohStr = <span class="string">&quot;Ohhh no&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ohRegex = <span class="regexp">/Oh&#123;3,6&#125;\sno/g</span>; <span class="comment">// 修改这一行</span></span><br><span class="line"><span class="keyword">let</span> result = ohRegex.<span class="title function_">test</span>(ohStr);</span><br></pre></td></tr></table></figure>

<p><strong>只指定匹配的下限</strong></p>
<p>在第一个数字后面跟一个逗号即可。</p>
<p>例如，要匹配至少出现 <code>3</code> 次字母 <code>a</code> 的字符串 <code>hah</code>，正则表达式应该是 <code>/ha&#123;3,&#125;h/</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable constant_">A4</span> = <span class="string">&quot;haaaah&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">A2</span> = <span class="string">&quot;haah&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">A100</span> = <span class="string">&quot;h&quot;</span> + <span class="string">&quot;a&quot;</span>.<span class="title function_">repeat</span>(<span class="number">100</span>) + <span class="string">&quot;h&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> multipleA = <span class="regexp">/ha&#123;3,&#125;h/</span>;</span><br><span class="line">multipleA.<span class="title function_">test</span>(<span class="variable constant_">A4</span>);</span><br><span class="line">multipleA.<span class="title function_">test</span>(<span class="variable constant_">A2</span>);</span><br><span class="line">multipleA.<span class="title function_">test</span>(<span class="variable constant_">A100</span>);</span><br></pre></td></tr></table></figure>

<p><strong>指定匹配的确切数量</strong></p>
<p>要指定一定数量的匹配模式，只需在大括号之间放置一个数字。</p>
<p>例如，要只匹配字母 <code>a</code> 出现 <code>3</code> 次的单词<code>hah</code>，正则表达式应为<code>/ha&#123;3&#125;h/</code>。</p>
<h4 id="正向先行断言和负向先行断言"><a href="#正向先行断言和负向先行断言" class="headerlink" title="正向先行断言和负向先行断言"></a>正向先行断言和负向先行断言</h4><p>先行断言 （Lookaheads）是告诉 JavaScript 在字符串中向前查找的匹配模式。 当想要在同一个字符串上搜寻多个匹配模式时，这可能非常有用。</p>
<p>有两种先行断言：正向先行断言（positive lookahead）和负向先行断言（negative lookahead）。</p>
<p>正向先行断言会查看并确保搜索匹配模式中的元素存在，但实际上并不匹配。 正向先行断言的用法是 <code>(?=...)</code>，其中 <code>...</code> 就是需要存在但不会被匹配的部分。</p>
<p>另一方面，负向先行断言会查看并确保搜索匹配模式中的元素不存在。 负向先行断言的用法是 <code>(?!...)</code>，其中 <code>...</code> 是希望不存在的匹配模式。 如果负向先行断言部分不存在，将返回匹配模式的其余部分。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> quit = <span class="string">&quot;qu&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> noquit = <span class="string">&quot;qt&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> quRegex= <span class="regexp">/q(?=u)/</span>;</span><br><span class="line"><span class="keyword">let</span> qRegex = <span class="regexp">/q(?!u)/</span>;</span><br><span class="line">quit.<span class="title function_">match</span>(quRegex);<span class="comment">//[&quot;q&quot;]</span></span><br><span class="line">noquit.<span class="title function_">match</span>(qRegex);<span class="comment">//[&quot;q&quot;]</span></span><br></pre></td></tr></table></figure>

<p>先行断言的更实际用途是检查一个字符串中的两个或更多匹配模式。 这里有一个简单的密码检查器，密码规则是 3 到 6 个字符且至少包含一个数字：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> password = <span class="string">&quot;abc123&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> checkPass = <span class="regexp">/(?=\w&#123;3,6&#125;)(?=\D*\d)/</span>;</span><br><span class="line">checkPass.<span class="title function_">test</span>(password);</span><br></pre></td></tr></table></figure>

<h4 id="检查混合字符组"><a href="#检查混合字符组" class="headerlink" title="检查混合字符组"></a>检查混合字符组</h4><p>有时候我们想使用正则表达式里的括号 <code>()</code> 来检查字符组。</p>
<p>如果想在字符串找到 <code>Penguin</code> 或 <code>Pumpkin</code>，可以用这个正则表达式：<code>/P(engu|umpk)in/g</code>。</p>
<p>然后使用 <code>test()</code> 方法检查 test 字符串里面是否包含字符组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> testStr = <span class="string">&quot;Pumpkin&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> testRegex = <span class="regexp">/P(engu|umpk)in/</span>;</span><br><span class="line">testRegex.<span class="title function_">test</span>(testStr);</span><br></pre></td></tr></table></figure>

<h4 id="捕获组"><a href="#捕获组" class="headerlink" title="捕获组"></a>捕获组</h4><p>当你想要匹配一个像下面这样多次出现的单词，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> repeatStr = <span class="string">&quot;row row row your boat&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>你可以使用 <code>/row row row/</code>。但如果你不知道重复的特定单词，怎么办？ 捕获组 可以用于找到重复的子字符串。</p>
<p>捕获组是通过把要捕获的正则表达式放在括号中来构建的。 在这个例子里， 目标是捕获一个包含字母数字字符的词，所以捕获组是将 <code>\w+</code> 放在括号中：<code>/(\w+)/</code>。</p>
<p>分组匹配的子字符串被保存到一个临时的“变量”， 可以使用同一正则表达式和反斜线及捕获组的编号来访问它（例如：<code>\1</code>）。 捕获组按其开头括号的位置自动编号（从左到右），从 1 开始。</p>
<p>下面的示例是匹配被空格隔开的两个相同单词：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> repeatRegex = <span class="regexp">/(\w+) \1 \1/</span>;</span><br><span class="line">repeatRegex.<span class="title function_">test</span>(repeatStr); <span class="comment">// Returns true</span></span><br><span class="line">repeatStr.<span class="title function_">match</span>(repeatRegex); <span class="comment">// Returns [&quot;row row row&quot;, &quot;row&quot;]</span></span><br></pre></td></tr></table></figure>

<p>在字符串上调用 <code>.match()</code> 方法将返回一个数组，其中包含它最终匹配到的子字符串及其捕获组。</p>
<p>在 <code>reRegex</code> 中使用捕获组来匹配一个只由相同的数字重复三次组成的由空格分隔字符串。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let repeatNum = <span class="string">&quot;42 42 42&quot;</span>;</span><br><span class="line">let reRegex = /^(\d+)\s\<span class="number">1</span>\s\<span class="number">1</span>$/; <span class="comment">// 修改这一行</span></span><br><span class="line">let result = reRegex.test(repeatNum);</span><br></pre></td></tr></table></figure>

<h5 id="搜索或替换"><a href="#搜索或替换" class="headerlink" title="搜索或替换"></a>搜索或替换</h5><p>搜索功能是很有用的。 但是，当搜索同时也执行更改（或替换）匹配文本的操作时，搜索功能就会显得更加强大。</p>
<p>可以在字符串上使用 <code>.replace()</code> 方法来搜索并替换字符串中的文本。 <code>.replace()</code> 的输入首先是想要搜索的正则表达式匹配模式。 第二个参数是用于替换匹配的字符串或用于执行某些操作的函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wrongText = <span class="string">&quot;The sky is silver.&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> silverRegex = <span class="regexp">/silver/</span>;</span><br><span class="line">wrongText.<span class="title function_">replace</span>(silverRegex, <span class="string">&quot;blue&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><code>replace</code> 调用将返回字符串 <code>The sky is blue.</code>。</p>
<p>你还可以使用美元符号（<code>$</code>）访问替换字符串中的捕获组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Code Camp&quot;</span>.<span class="title function_">replace</span>(<span class="regexp">/(\w+)\s(\w+)/</span>, <span class="string">&#x27;$2 $1&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>调用 <code>replace</code> 将返回字符串 <code>Camp Code</code>。</p>
<h4 id="删除开头和结尾的空白"><a href="#删除开头和结尾的空白" class="headerlink" title="删除开头和结尾的空白"></a>删除开头和结尾的空白</h4><p>有时字符串周围存在的空白字符并不是必需的。 字符串的典型处理是删除字符串开头和结尾处的空格。</p>
<p>编写一个正则表达式并使用适当的字符串方法删除字符串开头和结尾的空格。</p>
<p><strong>注意：</strong> <code>String.prototype.trim()</code> 方法在这里也可以实现同样的效果，但是你需要使用正则表达式来完成此项挑战。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hello = <span class="string">&quot;   Hello, World!  &quot;</span>;</span><br><span class="line"><span class="keyword">let</span> wsRegex = <span class="regexp">/^\s+|\s+$/g</span>; <span class="comment">// 修改这一行</span></span><br><span class="line"><span class="keyword">let</span> result = hello.<span class="title function_">replace</span>(wsRegex,<span class="string">&quot;&quot;</span>); <span class="comment">// 修改这一行</span></span><br></pre></td></tr></table></figure>

<h2 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h2><p>函数式编程是一种方案简单、功能独立、对作用域外没有任何副作用的编程范式：<code>INPUT -&gt; PROCESS -&gt; OUTPUT</code>。</p>
<p>函数式编程：</p>
<p>1）<strong>功能独立</strong>——不依赖于程序的状态（比如可能发生变化的全局变量）；</p>
<p>2）<strong>纯函数</strong>——同一个输入永远能得到同一个输出；</p>
<p>3）<strong>有限的副作用</strong>——可以严格地限制函数外部对状态的更改。</p>
<blockquote>
<p>Callbacks 是被传递到另一个函数中调用的函数。 你应该已经在其他函数中看过这个写法，例如在 <code>filter</code> 中，回调函数告诉 JavaScript 以什么规则过滤数组。</p>
<p>函数就像其他正常值一样，可以赋值给变量、传递给另一个函数，或从其它函数返回，这种函数叫做头等 first class 函数。 在 JavaScript 中，所有函数都是头等函数。</p>
<p>将函数为参数或返回值的函数叫做高阶 ( higher order) 函数。</p>
<p>当函数被传递给另一个函数或从另一个函数返回时，那些传入或返回的函数可以叫做 lambda。</p>
</blockquote>
<p><strong>函数式编程的核心原则之一是不改变任何东西</strong>。 变化会导致错误。 如果一个函数不改变传入的参数、全局变量等数据，那么它造成问题的可能性就会小很多。</p>
<p>前面的例子没有任何复杂的操作，但是 <code>splice</code> 方法改变了原始数组，导致 bug 产生。</p>
<p>回想一下，在函数式编程中，改变或变更叫做 mutation，这种改变的结果叫做“副作用”（side effect）。 理想情况下，函数应该是不会产生任何副作用的 pure function。</p>
<p>让我们尝试掌握这个原则：<strong>不要改变代码中的任何变量或对象。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局变量</span></span><br><span class="line"><span class="keyword">let</span> fixedValue = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">incrementer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> fixedValue+<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然我们没有改变全局变量值，但在没有全局变量 <code>fixedValue</code> 的情况下，<code>incrementer</code> 函数将不起作用。</p>
<p>函数式编程的另一个原则是：<strong>总是显式声明依赖关系。</strong> 如果函数依赖于一个变量或对象，那么将该变量或对象作为参数直接传递到函数中。</p>
<p>这样做会有很多好处。 其中一点是让函数更容易测试，因为你确切地知道参数是什么，并且这个参数也不依赖于程序中的任何其他内容。</p>
<p>其次，这样做可以让你更加自信地更改，删除或添加新代码。 因为你很清楚哪些是可以改的，哪些是不可以改的，这样你就知道哪里可能会有潜在的陷阱。</p>
<p>最后，无论代码的哪一部分执行它，函数总是会为同一组输入生成相同的输出。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局变量</span></span><br><span class="line"><span class="keyword">let</span> fixedValue = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只修改这一行下面的代码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">incrementer</span>(<span class="params">param</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> param+<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>目前为止，我们已经看到了函数式编程的两个原则：</p>
<ol>
<li>不要更改变量或对象 - 创建新变量和对象，并在需要时从函数返回它们。 提示：使用类似 <code>const newArr = arrVar</code> 的东西，其中 <code>arrVar</code> 是一个数组，只会创建对现有变量的引用，而不是副本。 所以更改 <code>newArr</code> 中的值会同时更改 <code>arrVar</code> 中的值。</li>
<li>声明函数参数 - 函数内的任何计算仅取决于参数，而不取决于任何全局对象或变量。</li>
</ol>
</blockquote>
<h3 id="reduce方法分析数据"><a href="#reduce方法分析数据" class="headerlink" title="reduce方法分析数据"></a>reduce方法分析数据</h3><p><code>reduce()</code>（即<code>Array.prototype.reduce()</code>），是 JavaScript 所有数组操作中最常用的方法。 几乎可以用<code>reduce</code>方法解决所有数组处理问题。</p>
<p><code>reduce</code>方法是处理数组更通用的方式，而且<code>filter</code>和<code>map</code>方法都可以当作是<code>reduce</code>的特殊实现。 <code>reduce</code>方法遍历数组中的每个项目并返回单个值（即字符串、数字、对象、数组）。 这是通过在每次迭代中调用一个回调函数来实现的。</p>
<p>回调函数接受四个参数。 第一个参数称为叠加器，它是上一次迭代中回调函数的返回值，第二个参数是当前正在处理的数组元素，第三个参数是该参数的索引，第四个参数是在其上调用 <code>reduce</code> 方法的数组。</p>
<p>除了回调函数，<code>reduce</code> 还有一个额外的参数做为叠加器的初始值。 如果没有第二个参数，会跳过第一次迭代，第二次迭代给叠加器传入数组的第一个元素。</p>
<p>见下面的例子，给 <code>users</code> 数组使用 <code>reduce</code> 方法，返回所有用户数组的和。 为了简化，例子仅使用了回调函数的第一个参数和第二个参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">age</span>: <span class="number">34</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Amy&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;camperCat&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sumOfAges = users.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, user</span>) =&gt;</span> sum + user.<span class="property">age</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sumOfAges);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">age</span>: <span class="number">34</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Amy&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;camperCat&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> usersObj = users.<span class="title function_">reduce</span>(<span class="function">(<span class="params">obj, user</span>) =&gt;</span> &#123;</span><br><span class="line">  obj[user.<span class="property">name</span>] = user.<span class="property">age</span>;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(usersObj);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">watchList 是包含一些电影信息的对象。 使用 reduce 查找由 Christopher Nolan 导演的电影的 IMDB 评级平均值。 回想一下之前的挑战，如何 filter 数据，以及使用 map 来获取你想要的数据。 您可能需要创建其他变量，并从 getRating 函数返回平均评分。 请注意，评级在对象中是字符串，需要将其转换为数字再用于数学运算。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRating</span>(<span class="params">watchList</span>)&#123;</span><br><span class="line">  <span class="comment">// Add your code below this line</span></span><br><span class="line">  <span class="keyword">const</span> averageRating = watchList</span><br><span class="line">    <span class="comment">// Use filter to find films directed by Christopher Nolan</span></span><br><span class="line">    .<span class="title function_">filter</span>(<span class="function"><span class="params">film</span> =&gt;</span> film.<span class="property">Director</span> === <span class="string">&quot;Christopher Nolan&quot;</span>)</span><br><span class="line">    <span class="comment">// Use map to convert their ratings from strings to numbers</span></span><br><span class="line">    .<span class="title function_">map</span>(<span class="function"><span class="params">film</span> =&gt;</span> <span class="title class_">Number</span>(film.<span class="property">imdbRating</span>))</span><br><span class="line">    <span class="comment">// Use reduce to add together their ratings</span></span><br><span class="line">    .<span class="title function_">reduce</span>(<span class="function">(<span class="params">sumOfRatings, rating</span>) =&gt;</span> sumOfRatings + rating) /</span><br><span class="line">  <span class="comment">// Divide by the number of Nolan films to get the average rating</span></span><br><span class="line">  watchList.<span class="title function_">filter</span>(<span class="function"><span class="params">film</span> =&gt;</span> film.<span class="property">Director</span> === <span class="string">&quot;Christopher Nolan&quot;</span>).<span class="property">length</span>;</span><br><span class="line">  <span class="comment">// Add your code above this line</span></span><br><span class="line">  <span class="keyword">return</span> averageRating;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRating</span>(<span class="params">watchList</span>) &#123;</span><br><span class="line">  <span class="comment">// Add your code below this line</span></span><br><span class="line">  <span class="keyword">const</span> nolanData = watchList</span><br><span class="line">    .<span class="title function_">reduce</span>(<span class="function">(<span class="params">data, &#123; Director: director, imdbRating: rating &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (director === <span class="string">&#x27;Christopher Nolan&#x27;</span>) &#123;</span><br><span class="line">        data.<span class="property">count</span>++;</span><br><span class="line">        data.<span class="property">sum</span> += <span class="title class_">Number</span>(rating);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> data;</span><br><span class="line">    &#125;, &#123; <span class="attr">sum</span>: <span class="number">0</span>, <span class="attr">count</span>: <span class="number">0</span> &#125;);</span><br><span class="line">  <span class="keyword">const</span> averageRating = nolanData.<span class="property">sum</span> / nolanData.<span class="property">count</span>;</span><br><span class="line">  <span class="comment">// Add your code above this line</span></span><br><span class="line">  <span class="keyword">return</span> averageRating;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="sort排序"><a href="#sort排序" class="headerlink" title="sort排序"></a><code>sort</code>排序</h3><p><code>sort</code> 方法可以根据回调函数对数组元素进行排序。</p>
<p>举个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ascendingOrder</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">ascendingOrder</span>([<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br></pre></td></tr></table></figure>

<p>这将返回值 <code>[1, 2, 3, 4, 5]</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reverseAlpha</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a === b ? <span class="number">0</span> : a &lt; b ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">reverseAlpha</span>([<span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;z&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;s&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<p>这将返回值 <code>[&#39;z&#39;, &#39;s&#39;, &#39;l&#39;, &#39;h&#39;, &#39;b&#39;]</code>。</p>
<p>JavaScript 的默认排序方法是 Unicode 值顺序排序，有时可能会得到意想不到的结果。 因此，建议提供一个回调函数来指定如何对数组项目排序。 这个回调函数通常叫做 <code>compareFunction</code>，它根据 <code>compareFunction</code> 的返回值决定数组元素的排序方式： 如果两个元素 <code>a</code> 和 <code>b</code>，<code>compareFunction(a,b)</code> 返回一个比 0 小的值，那么 <code>a</code> 会在 <code>b</code> 的前面。 如果两个元素 <code>a</code> 和 <code>b</code>，<code>compareFunction(a,b)</code> 返回一个比 0 大的值，那么 <code>b</code> 会在 <code>a</code> 的前面。 如果两个元素 <code>a</code> 和 <code>b</code>，<code>compareFunction(a,b)</code> 返回等于 0 的值，那么 <code>a</code> 和 <code>b</code> 的位置保持不变。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">alphabeticalOrder</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="comment">// 只修改这一行下面的代码</span></span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="title function_">charCodeAt</span>()-b.<span class="title function_">charCodeAt</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 只修改这一行上面的代码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alphabeticalOrder</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;z&quot;</span>, <span class="string">&quot;g&quot;</span>]);</span><br></pre></td></tr></table></figure>

<p><code>sort</code> <strong>方法会产生改变原始数组中元素顺序的副作用</strong>。 换句话说，它会改变数组的位置。 避免这种情况的一种方法是先将空数组连接到正在排序的数组上（记住 <code>slice</code> 和 <code>concat</code> 返回一个新数组），再用<code>sort</code>方法。</p>
<h3 id="split方法（切割字符串成数组）"><a href="#split方法（切割字符串成数组）" class="headerlink" title="split方法（切割字符串成数组）"></a><code>split</code>方法（切割字符串成数组）</h3><p><code>split</code> 方法将一个字符串分割成一个字符串数组。 它需要一个参数作为分隔符，它可以是用于拆分字符串或正则表达式的一个字符。 举个例子，如果分隔符是空格，你会得到一个单词数组；如果分隔符是空字符串，你会得到一个由字符串中每个字符组成的数组。</p>
<p>下面是两个用空格分隔一个字符串的例子，另一个是用数字的正则表达式分隔：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> bySpace = str.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> otherString = <span class="string">&quot;How9are7you2today&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> byDigits = otherString.<span class="title function_">split</span>(<span class="regexp">/\d/</span>);</span><br></pre></td></tr></table></figure>

<p><code>bySpace</code> 将有值 <code>[&quot;Hello&quot;, &quot;World&quot;]</code>，<code>byDigits</code> 将有值 <code>[&quot;How&quot;, &quot;are&quot;, &quot;you&quot;, &quot;today&quot;]</code>。</p>
<p>因为字符串是不可变的，<code>split</code> 方法操作它们更方便。</p>
<h3 id="join方法（拼接数组字符）"><a href="#join方法（拼接数组字符）" class="headerlink" title="join方法（拼接数组字符）"></a><code>join</code>方法（拼接数组字符）</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> str = arr.<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="every方法检查数组中每个元素是否符合条件"><a href="#every方法检查数组中每个元素是否符合条件" class="headerlink" title="every方法检查数组中每个元素是否符合条件"></a><code>every</code>方法检查数组中每个元素是否符合条件</h3><p><code>every</code> 方法用于检测数组中<em>所有</em>元素是否都符合指定条件。 如果所有元素满足条件，返回布尔值 <code>true</code>，反之返回 <code>false</code>。</p>
<p>举个例子，下面的代码检测数组 <code>numbers</code> 的所有元素是否都小于 10：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">11</span>];</span><br><span class="line"></span><br><span class="line">numbers.<span class="title function_">every</span>(<span class="keyword">function</span>(<span class="params">currentValue</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> currentValue &lt; <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>every</code> 方法在这里会返回 <code>false</code>。</p>
<h3 id="some-方法检查数组中是否有元素是否符合条件"><a href="#some-方法检查数组中是否有元素是否符合条件" class="headerlink" title="some 方法检查数组中是否有元素是否符合条件"></a><code>some</code> 方法检查数组中是否有元素是否符合条件</h3><p><code>some</code> 方法用于检测数组中<em>任何</em>元素是否满足指定条件。 如果有一个元素满足条件，返回布尔值 <code>true</code>，反之返回 <code>false</code>。</p>
<p>举个例子，下面的代码检测数组<code>numbers</code>中是否有元素小于 10：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">10</span>, <span class="number">50</span>, <span class="number">8</span>, <span class="number">220</span>, <span class="number">110</span>, <span class="number">11</span>];</span><br><span class="line"></span><br><span class="line">numbers.<span class="title function_">some</span>(<span class="keyword">function</span>(<span class="params">currentValue</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> currentValue &lt; <span class="number">10</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>some</code> 方法将返回 <code>true</code>。</p>
<h3 id="函数柯里化和局部调用"><a href="#函数柯里化和局部调用" class="headerlink" title="函数柯里化和局部调用"></a>函数<strong>柯里化</strong>和<strong>局部调用</strong></h3><p>arity（参数个数）是函数所需的形参的数量。 函数柯里化（Currying）意思是把接受多个 arity 的函数变换成接受单一 arity 的函数。</p>
<p>换句话说，就是重构函数让它接收一个参数，然后返回接收下一个参数的函数，依此类推。</p>
<p>举个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unCurried</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">curried</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">curried</span> = x =&gt; <span class="function"><span class="params">y</span> =&gt;</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="title function_">curried</span>(<span class="number">1</span>)(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p><code>curried(1)(2)</code> 会返回 <code>3</code>。</p>
<p>柯里化在不能一次为函数提供所有参数情况下很有用。 因为它可以将每个函数的调用保存到一个变量中，该变量将保存返回的函数引用，该引用在下一个参数可用时接受该参数。 下面是使用柯里化函数的例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> funcForY = <span class="title function_">curried</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">funcForY</span>(<span class="number">2</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>类似地，局部调用（ partial application）的意思是一次对一个函数应用几个参数，然后返回另一个应用更多参数的函数。 这是一个示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">impartial</span>(<span class="params">x, y, z</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> partialFn = impartial.<span class="title function_">bind</span>(<span class="variable language_">this</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="title function_">partialFn</span>(<span class="number">10</span>); <span class="comment">// 13</span></span><br></pre></td></tr></table></figure>

</div><div class="article-licensing box"><div class="licensing-title"><p>JavaScript学习汇总</p><p><a href="https://bisbis233/github.io/2022/10/03/js学习汇总/">https://bisbis233/github.io/2022/10/03/js学习汇总/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>一条懒狗</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-10-03</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-02-01</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/JavaScript/">JavaScript</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/10/03/JavaScript%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">JavaScript学习汇总</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/09/25/html%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/"><span class="level-item">Html学习汇总</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://bisbis233/github.io/2022/10/03/js%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/';
            this.page.identifier = '2022/10/03/js学习汇总/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + '一条懒狗' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.svg" alt="一条懒狗"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">一条懒狗</p><p class="is-size-6 is-block">前端小白</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>广州/珠海</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">5</p></a></div></div></nav></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/"><span class="level-start"><span class="level-item">学习汇总</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-02T08:22:52.000Z">2023-02-02</time></p><p class="title"><a href="/2023/02/02/2023-2-2%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/">2023.2.2刷题笔记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-10-20T14:31:56.000Z">2022-10-20</time></p><p class="title"><a href="/2022/10/20/Sass%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">Sass学习汇总</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">学习汇总</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-10-10T14:00:55.000Z">2022-10-10</time></p><p class="title"><a href="/2022/10/10/css%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">Css学习汇总</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">学习汇总</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-10-05T15:16:31.000Z">2022-10-05</time></p><p class="title"><a href="/2022/10/05/Vue2%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">Vue2学习汇总</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">学习汇总</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-10-03T15:16:31.000Z">2022-10-03</time></p><p class="title"><a href="/2022/10/03/JavaScript%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">JavaScript学习汇总</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0%E6%B1%87%E6%80%BB/">学习汇总</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">九月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Css/"><span class="tag">Css</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Html/"><span class="tag">Html</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sass/"><span class="tag">Sass</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue2/"><span class="tag">Vue2</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/avatar.svg" alt="一条懒狗的博客" height="28"></a><p class="is-size-7"><span>&copy; 2023 一条懒狗</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>